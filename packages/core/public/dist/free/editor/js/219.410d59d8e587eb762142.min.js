(self.webpackChunk_brizy_builder=self.webpackChunk_brizy_builder||[]).push([[219],{1114:(e,t,r)=>{e.exports=r(76301)},25879:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reduxBatch=function(e){var t=[],r=void 0;function o(){t===r&&(t=t.slice())}function s(e){if("function"!=typeof e)throw new Error("Invalid listener, expected a function");var r=!0;return o(),t.push(e),function(){r&&(o(),t.splice(t.indexOf(e),1),r=!1)}}function a(){for(var e=t,o=0;o<e.length;++o)r=e,e[o]()}return function(){var t=e.apply(void 0,arguments),r=!1,o=!1;function n(e){return Array.isArray(e)?e.map(function(e){return n(e)}):t.dispatch(e)}return t.subscribe(function(){o?r=!0:a()}),Object.assign({},t,{dispatch:function(e){var t=o;t||(r=!1,o=!0);var s=n(e),c=r&&!t;return t||(r=!1,o=!1),c&&a(),s},subscribe:s})}}},72219:(e,t,r)=>{"use strict";r.d(t,{bootstrap:()=>Ze}),r(37227),r(93991);var o=r(69648),s=r(38024);const a="HYDRATE",n="DELETE_GLOBAL_BLOCK";var c=r(11073),i=r(1114);function l(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var d=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),u=()=>Math.random().toString(36).substring(7).split("").join("."),p={INIT:`@@redux/INIT${u()}`,REPLACE:`@@redux/REPLACE${u()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${u()}`};function b(e,t,r){if("function"!=typeof e)throw new Error(l(2));if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(l(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(l(1));return r(b)(e,t)}let o=e,s=t,a=new Map,n=a,c=0,i=!1;function u(){n===a&&(n=new Map,a.forEach((e,t)=>{n.set(t,e)}))}function _(){if(i)throw new Error(l(3));return s}function h(e){if("function"!=typeof e)throw new Error(l(4));if(i)throw new Error(l(5));let t=!0;u();const r=c++;return n.set(r,e),function(){if(t){if(i)throw new Error(l(6));t=!1,u(),n.delete(r),a=null}}}function m(e){if(!function(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}(e))throw new Error(l(7));if(void 0===e.type)throw new Error(l(8));if("string"!=typeof e.type)throw new Error(l(17));if(i)throw new Error(l(9));try{i=!0,s=o(s,e)}finally{i=!1}return(a=n).forEach(e=>{e()}),e}return m({type:p.INIT}),{dispatch:m,subscribe:h,getState:_,replaceReducer:function(e){if("function"!=typeof e)throw new Error(l(10));o=e,m({type:p.REPLACE})},[d]:function(){const e=h;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(l(11));function r(){const e=t;e.next&&e.next(_())}return r(),{unsubscribe:e(r)}},[d](){return this}}}}}function _(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...r)=>e(t(...r)))}r(99930),r(81975);var h=r(56324),m=r(86646),g=r(99399);r(29217);const f="UNDO";class y{snapshots=[];config={maxSize:20,collapseFrequency:2e3};currentIndex=-1;previousIndex=-1;lastSnapshotTimestamp=0;canUndo_=!1;canRedo_=!1;constructor(e){e&&(this.config=e),this.snapshots=new Array(this.config.maxSize).fill(null)}getSnapshots(){return this.snapshots}getCurrentSnapshot(){return this.snapshots[this.currentIndex]??null}getPreviousSnapshot(){return this.snapshots[this.previousIndex]??null}getSnapshot(e){if(e>0){const t=e-1;return this.snapshots[t]??null}{const t=this.snapshots.filter(e=>null!==e).length+e;return this.snapshots[t]??null}}update(e,t){if(Object.keys(e).some(t=>e[t]!==this.snapshots[this.currentIndex]?.[t])){const r=e,o=Date.now();if(t?.replacePresent)this.snapshots[this.currentIndex]=r;else{if(this.snapshots[this.currentIndex+1]&&null!==this.snapshots[this.currentIndex+1]){this.previousIndex=this.currentIndex,this.currentIndex++,this.snapshots[this.currentIndex]=r;for(let e=this.currentIndex+1;e<=this.snapshots.length-1;e++)this.snapshots[e]=null}else if(o-this.lastSnapshotTimestamp>this.config.collapseFrequency)if(this.currentIndex===this.snapshots.length-1){for(let e=0;e<=this.snapshots.length-2;e++)this.snapshots[e]=this.snapshots[e+1];this.snapshots[this.snapshots.length-1]=r}else this.previousIndex=this.currentIndex,this.currentIndex++,this.snapshots[this.currentIndex]=r;else this.snapshots[this.currentIndex]=r;this.updateFlags(),this.lastSnapshotTimestamp=o}}}replaceSnapshots(e){if(e.length!==this.snapshots.length)throw new Error("History. snapshots must be of same lengths");for(let t=0;t<this.snapshots.length;t++)if(null===this.snapshots[t]&&null!==e[t]||null!==this.snapshots[t]&&null===e[t])throw new Error("History. only patch snapshots supported for now");this.snapshots=e}canUndo(){return this.canUndo_}undo(){this.canUndo()&&(this.previousIndex=this.currentIndex,this.currentIndex--,this.updateFlags())}canRedo(){return this.canRedo_}redo(){this.canRedo()&&(this.previousIndex=this.currentIndex,this.currentIndex++,this.updateFlags())}updateFlags(){this.canUndo_=this.currentIndex>0,this.canRedo_=Boolean(this.snapshots[this.currentIndex+1]&&null!==this.snapshots[this.currentIndex+1])}}function E(e,t){return{...e,history:{currSnapshot:t.getCurrentSnapshot(),prevSnapshot:t.getPreviousSnapshot(),canUndo:t.canUndo(),canRedo:t.canRedo()}}}var O=r(38662),z=r(17279),L=r(66181),A=r(25551);r(73242);var T=r(27033);const P={inProcessing:0,inPending:!1,blocks:{},initialized:!1},S={value:{items:[]},path:[]},B="REGENERATED",v="u2354e9A74GE",k=e=>e.find(e=>e.title===B&&e.id===v);var j=r(24902),M=r(83414),D=r(38032);(0,O.ht)(!1);var R=r(53160),C=r(99453);const I=e=>e.type&&e.value&&e.value._id&&e.value._thumbnailSrc;function x(e){const t={};return(0,g.A)(e,e=>{if(I(e)){const r=e.value;t[e.value._id]={_thumbnailSrc:r._thumbnailSrc,_thumbnailWidth:r._thumbnailWidth,_thumbnailHeight:r._thumbnailHeight,_thumbnailTime:r._thumbnailTime}}}),t}const w={deviceMode:"desktop",activeElement:null,leftSidebar:{drawerContentType:null},rightSidebar:{type:"options",isOpen:!1,lock:void 0,alignment:"right",activeTab:void 0,expanded:!1},showHiddenElements:!1,currentRole:"default",currentLanguage:"default"},U=function(e,t){const r=new y;return function(o,s){switch(s.type){case f:case"REDO":{const e=s.type===f?r.canUndo():r.canRedo(),t=s.type===f?r.undo:r.redo;return e?(t.call(r),E({...o,...r.getCurrentSnapshot(),storeWasChanged:m.O.changed},r)):"object"==typeof(a=o).history&&null!==a.history&&(0,g.dl)(["currSnapshot","prevSnapshot","canUndo","canRedo"],a.history)?o:E({...o,...r.getCurrentSnapshot(),storeWasChanged:m.O.changed},r)}default:{const a=e(o,s);if(!s.type.includes("@@redux/INIT")){t.onBeforeUpdate&&t.onBeforeUpdate(o,s,r);const e=function(e,t){return t.reduce((t,r)=>(t[r]=e[r],t),{})}(a,t.keysToTrack);r.update(e,{replacePresent:Boolean(s?.meta?.historyReplacePresent)})}return E(a,r)}}var a}}((K={authorized:(e,t)=>{switch(t.type){case"HYDRATE":{const{authorized:e}=t.payload;return e}case"UPDATE_AUTHORIZATION":return t.payload;default:return e}},syncAllowed:(e,t)=>{switch(t.type){case"HYDRATE":{const{syncAllowed:e}=t.payload;return e}case"UPDATE_SYNC_ALLOWED":return t.payload;default:return e}},blocksData:(e={},t,r)=>{switch(t.type){case"HYDRATE":{const{page:e,globalBlocks:r,editorMode:o}=t.payload,a=e.data?.items||[];if((0,s.mV)(o)&&0===a.length)return{ecupxjcqmrpxjdimoebbkbnotrlufkfokjvr:{type:"Story",value:{_styles:["story"],items:[{type:"StoryItem",value:{_styles:["story-item"],items:[],_id:"dfmwxzkwbiaezltvsxhdinhplvimzenkiqto"}}],_id:"ecupxjcqmrpxjdimoebbkbnotrlufkfokjvr"},blockId:"StoryDefault"}};const n=a.reduce((e,t)=>{const r=(0,O.jM)(t,e=>{delete e.meta}),{_id:o,globalBlockId:s}=r.value;return e[s||o]=r,e},{}),c=Object.entries(r).reduce((e,[t,r])=>(e[t]=(0,O.jM)(r.data,e=>{e.value._id=t}),e),{});return(0,O.jM)({...n,...c},e=>{(0,g.A)(e,e=>{if(e.type&&"GlobalBlock"===e.type){const{globalBlockId:t}=e.value;t&&(e.value._id=t,delete e.value.globalBlockId)}})})}case h.Q3.IMPORT_STORY:{const{blocks:o}=t.payload,{insertIndex:s}=t.meta,a=(0,c.G2)(r)[0],n=(0,A.e8)(e[a].value.items,s,o);return(0,z.Oe)(e,[a,"value","items"],n)}case"ADD_BLOCK":{const{block:r}=t.payload;return{...e,[r.value._id]:r}}case"MAKE_POPUP_TO_GLOBAL_POPUP":{const{block:{data:r},fromBlockId:o}=t.payload,s=(0,A.BR)(e=>e.value._id===o?(0,L.Bv)({blockId:e.blockId,uid:r.value._id}):e,e);return(0,O.jM)(s,e=>{e[r.value._id]=r})}case"MAKE_GLOBAL_POPUP_TO_POPUP":{const{block:r,fromBlockId:o,type:s}=t.payload;if("external"===s)return{...e,[r.value._id]:r};const a=t.payload.parentId,n=e=>e.value._id===o?r:e,c=e=>(0,A.yX)(e)?(0,g.Tj)(c,n(e)):(0,g.Tj)(c,e),i=e=>!!(0,A.yX)(e)&&e.value._id===a,l=e=>i(e)?c(e):(0,g.Tj)(l,e);return l(e)}case"MAKE_GLOBAL_BLOCK_TO_BLOCK":{const{block:r}=t.payload;return{...e,[r.value._id]:r}}case"MAKE_BLOCK_TO_GLOBAL_BLOCK":{const{block:{data:r},fromBlockId:o}=t.payload;return(0,O.jM)(e,e=>{e[r.value._id]=r,delete e[o]})}case n:{const{id:r}=t.payload;return(0,O.jM)(e,e=>{delete e[r]})}case h.Q3.REMOVE_BLOCK:{const{index:o}=t.payload,s=(0,c.bb)(r),a=Object.keys(s),n=(0,c.G2)(r)[o];return a.includes(n)?e:(0,O.jM)(e,e=>{delete e[n]})}case h.Q3.REMOVE_BLOCKS:{const t=(0,c.G2)(r),o=(0,c.bb)(r),s=Object.keys(o),a=t.filter(e=>!s.includes(e));return(0,O.jM)(e,e=>{a.forEach(t=>{delete e[t]})})}case"UPDATE_GLOBAL_BLOCK":{const{uid:r,data:o}=t.payload;return null===o.value?e:{...e,[r]:o}}case h.Q3.IMPORT_TEMPLATE:case"UPDATE_BLOCKS":{const{blocks:r}=t.payload,o=r.reduce((e,t)=>("GlobalBlock"===t.type||(e[t.value._id]=t),e),{});return{...e,...o}}default:return e}},copiedElement:(e=S,t)=>t.type===h.Q3.COPY_ELEMENT?{...e,...t.value}:e,error:(e=null,t)=>{switch(t.type){case"HYDRATE":{const{projectStatus:r}=t.payload;return r&&r.locked?{code:j.tG.PROJECT_LOCKED_ERROR,data:r}:e}case h.Q3.UPDATE_ERROR:return t.payload;default:return e}},extraFontStyles:(e=[],t)=>{switch(t.type){case"HYDRATE":{const{project:e}=t.payload;return e.data.extraFontStyles??[]}case"UPDATE_EXTRA_FONT_STYLES":return t.payload;case h.Q3.IMPORT_TEMPLATE:case"ADD_BLOCK":case"ADD_GLOBAL_BLOCK":case"ADD_GLOBAL_POPUP":{const{extraFontStyles:r}=t.payload;return r&&0!==r.length?[...e,...r]:e}default:return e}},fonts:(e={},t)=>{switch(t.type){case"HYDRATE":{const{fonts:e}=t.payload;return e}case"ADD_FONTS":case"DELETE_FONTS":{const r=t.payload;return r?{...e,...r}:e}case h.Q3.IMPORT_STORY:case h.Q3.IMPORT_TEMPLATE:case h.Q3.IMPORT_KIT:case"ADD_BLOCK":case"ADD_GLOBAL_BLOCK":case"ADD_GLOBAL_POPUP":{const{fonts:r}=t.payload;return r&&0!==r.length?(0,O.jM)(e,e=>{r.forEach(({type:t,fonts:r})=>{e[t]=e[t]||{data:[]},e[t].data.push(...r)})}):e}default:return e}},globalBlocks:(e={},t,r)=>{switch(t.type){case"HYDRATE":{const{globalBlocks:e,page:{data:{items:r=[]}},config:o}=t.payload,s=r.filter(e=>e?.value?.globalBlockId).map(e=>e?.value?.globalBlockId);return Object.entries(e).reduce((e,[r,a])=>{const n=(0,O.jM)(a,e=>{e.data.editorVersion=o.editorVersion});return s.includes(r)&&!(0,L.Bs)(a.data)?e[r]=(0,O.jM)(n,e=>{e.rules=(0,L.Vd)(a,!0,t.payload.page,o).rules,e.data.value._id=r}):e[r]=n,e},{})}case"ADD_BLOCK":return e;case"ADD_GLOBAL_BLOCK":{const{_id:o}=t.payload.block.value;return{...e,[o]:(0,L.Vd)(e[o],!0,r?.page,t.payload.config)}}case"MAKE_POPUP_TO_GLOBAL_POPUP":case"MAKE_BLOCK_TO_GLOBAL_BLOCK":{const{uid:r,data:o,status:s,meta:a,rules:n,dataVersion:c,position:i,dependencies:l}=t.payload.block;return(0,O.jM)(e,e=>({[o.value._id]:{uid:r,dataVersion:c,meta:a,data:o,status:s,rules:n,position:i,dependencies:l},...e}))}case"UPDATE_GLOBAL_BLOCK":{const{uid:o,data:s,config:a}=t.payload;if(null===s.value&&!(0,L.Bs)(e[o].data)){const t=(0,L.Vd)(e[o],!1,r?.page,a);return{...e,[o]:t}}return e}case h.Q3.UPDATE_GLOBAL_BLOCK_METADATA:{const{uid:r,title:o="",tags:s=""}=t.payload;return(0,O.jM)(e,e=>{o.length>0&&(e[r].title=o),e[r].tags=s})}case h.Q3.REMOVE_BLOCK:{const{index:o,config:s}=t.payload,a=(0,c.G2)(r),n=Object.keys(e),i=a[o];if(n.includes(a[o])&&!(0,L.Bs)(e[i].data)){const t=(0,L.Vd)(e[i],!1,r?.page,s);return{...e,[i]:t}}return e}case"MAKE_GLOBAL_BLOCK_TO_BLOCK":{const{fromBlockId:o,config:s}=t.payload,a=(0,L.Vd)(e[o],!1,r?.page,s);return{...e,[o]:a}}case"REORDER_BLOCKS":{const{oldIndex:o,newIndex:s,config:a}=t.payload,n=(0,c.G2)(r),i=Object.keys(e);if(i.includes(n[o])){const t=n[o],l=(0,z.Yr)((0,z.Wq)(n,o),s,t),d=n[o],u=(0,L.X5)(n,o,i),p=(0,L.X5)(l,s,i);if("center"===u&&("top"===p||"bottom"===p)&&!(0,L.CB)({pageBlocksIds:(0,c.C_)(r),globalBlocks:e,page:r?.page,config:a}).includes(d)){const t=(0,L.Vd)(e[d],!0,r?.page,a);return{...e,[d]:t}}}return e}case h.Q3.REMOVE_BLOCKS:{const{config:o}=t.payload,s=(0,c.G2)(r),a=Object.keys(e),n=(0,M.E)(s,a);return(0,O.jM)(e,e=>{n.forEach(t=>{(0,L.Bs)(e[t].data)||(e[t]=(0,L.Vd)(e[t],!1,r?.page,o))})})}case"UPDATE_BLOCKS":{const{blocks:o,config:s}=t.payload,a=(0,c.G2)(r),n=o.map(e=>e.value._id),i=(0,D.i)(a,n);return(0,O.jM)(e,e=>{i.forEach(t=>{e[t]&&!(0,L.Bs)(e[t].data)&&(e[t]=(0,L.Vd)(e[t],!1,r?.page,s))})})}case"UPDATE_GB_RULES":{const{id:r,rules:o}=t.payload;return(0,O.jM)(e,e=>{e[r].rules=o})}case n:{const{id:r}=t.payload;return(0,O.jM)(e,e=>{delete e[r]})}case"PUBLISH":{const e=(0,c.$L)(r),o=(0,c.n1)(r,t.payload.config),s=(0,c.vT)(r).reduce((t,r)=>({...t,[r]:e[r]}),{}),a=(0,c.F8)(r,t.payload.config);return Object.entries(e).reduce((t,[r,n])=>(t[r]=(0,O.jM)(n,t=>{const c="SectionPopup"===n.data.type||"SectionPopup2"===n.data.type;t.dependencies=(0,T.p)(t.data,e).filter(e=>"GlobalBlock"===e.type).map(e=>e.value._id),c||(t.position=a[r]||null),(o[r]||s[r]||c)&&(t.status="publish")}),t),{})}default:return e}},changedGBIds:(e=[],t,r)=>{switch(t.type){case"ADD_GLOBAL_BLOCK":case"ADD_GLOBAL_POPUP":return[...e,t.payload.block.value._id];case"MAKE_POPUP_TO_GLOBAL_POPUP":case"MAKE_BLOCK_TO_GLOBAL_BLOCK":return[...e,t.payload.block.data.value._id];case"MAKE_GLOBAL_POPUP_TO_POPUP":case"MAKE_GLOBAL_BLOCK_TO_BLOCK":{const{fromBlockId:r}=t.payload;return e.includes(r)?e:[...e,r]}case h.Q3.REMOVE_BLOCK:{const{id:o}=t.payload;return(0,c.bb)(r)[o]&&!e.includes(o)?[...e,o]:e}case h.Q3.REMOVE_BLOCKS:{const o=(0,c.n1)(r,t.payload.config),s=Object.keys(o),a=e;for(let t=0;t<s.length;t++){const r=s[t];e.includes(r)||a.push(r)}return a}case"UPDATE_GLOBAL_BLOCK":case h.Q3.UPDATE_GLOBAL_BLOCK_METADATA:{const{uid:r}=t.payload;return e.includes(r)?e:[...e,r]}case"FETCH_PAGE_SUCCESS":return[];default:return e}},page:(e,t,r)=>{switch(t.type){case"HYDRATE":{const{page:e,config:r}=t.payload;return(0,O.jM)(e,e=>{e.data.editorVersion=r.editorVersion})}case"PUBLISH":{const{status:o,editorMode:a}=t.payload;if((0,c.gn)(r)!==m.O.changed&&o===e.status)return e;const n=(0,s.Bs)(a)?(0,c.zY)(r):(0,c.xg)(r),i=[...(0,c.yv)(r).map(e=>e.value._id),...(0,c.No)(r)];return(0,O.jM)(n,e=>{e.status=o,e.dependencies=i,e.dataVersion=e.dataVersion+1})}case"UPDATE_TRIGGERS":{const{data:r}=t.payload;return(0,O.jM)(e,e=>{e.data.triggers=r,e.dataVersion=e.dataVersion+1})}case"UPDATE_POPUP_RULES":return(0,O.jM)(e,e=>{e.data.rulesAmount=t.payload.rules.length,e.dataVersion=e.dataVersion+1});case"UPDATE_PAGE_LAYOUT":{const{layout:r,config:o}=t.payload;return(0,R.I_)(e,o)?(0,O.jM)(e,e=>{e.layout.value=r,e.dataVersion=e.dataVersion+1}):e}case"UPDATE_PAGE_TITLE":{const{title:r,config:o}=t.payload;return(0,R.I_)(e,o)?(0,O.jM)(e,e=>{e.title=r,e.dataVersion=e.dataVersion+1}):e}case"UPDATE_PAGE_IS_HOME_PAGE":{const{isHomePage:r,config:o}=t.payload;return(0,R.I_)(e,o)?(0,O.jM)(e,e=>{e.layout.isHomePage=r,e.dataVersion=e.dataVersion+1}):e}default:return e}},blocksOrder:(e=[],t)=>{switch(t.type){case"HYDRATE":{const e=t.payload.page.data?.items||[],{page:r,globalBlocks:o,config:s}=t.payload;if((0,A.mV)(s)&&0===e.length)return["ecupxjcqmrpxjdimoebbkbnotrlufkfokjvr"];const a=e.map(e=>e.value.globalBlockId||e.value._id);return(0,L.cV)({pageBlocksIds:a,page:r,globalBlocks:o,config:s})}case"ADD_GLOBAL_POPUP":case"ADD_GLOBAL_BLOCK":case"ADD_BLOCK":{const{block:r}=t.payload,{insertIndex:o}=t.meta,{_id:s}=r.value;return e.includes(s)?e:(0,z.Yr)(e,o,r.value._id)}case h.Q3.REMOVE_BLOCK:{const{index:r}=t.payload;return(0,z.Wq)(e,r)}case h.Q3.REMOVE_BLOCKS:return[];case"MAKE_GLOBAL_POPUP_TO_POPUP":{const{block:r,fromBlockId:o,type:s}=t.payload;return"external"==s?(0,z._D)(e,e.findIndex(e=>e===o),r.value._id):e}case"MAKE_POPUP_TO_GLOBAL_POPUP":{const{block:r,fromBlockId:o,type:s}=t.payload;return"external"===s?(0,z._D)(e,e.findIndex(e=>e===o),r.data.value._id):e}case"MAKE_BLOCK_TO_GLOBAL_BLOCK":{const{block:r,fromBlockId:o}=t.payload;return(0,z._D)(e,e.findIndex(e=>e===o),r.data.value._id)}case"MAKE_GLOBAL_BLOCK_TO_BLOCK":{const{block:r,fromBlockId:o}=t.payload;return(0,z._D)(e,e.findIndex(e=>e===o),r.value._id)}case"REORDER_BLOCKS":{const{oldIndex:r,newIndex:o}=t.payload,s=e[r];return(0,z.Yr)((0,z.Wq)(e,r),o,s)}case h.Q3.IMPORT_TEMPLATE:{const{blocks:r}=t.payload,{insertIndex:o}=t.meta,s=r.map(e=>e.value._id);return(0,z.Yr)(e,o,s)}case"UPDATE_BLOCKS":{const{blocks:e}=t.payload;return e.map(e=>e.value._id)}case"UPDATE_GLOBAL_BLOCK":{const{uid:r,data:o}=t.payload;return null===o.value?e.filter(e=>e!==r):e}case n:{const{id:r}=t.payload;return e.filter(e=>e!==r)}default:return e}},project:(e,t,r)=>{switch(t.type){case"HYDRATE":{const{project:e,config:r}=t.payload;return(0,O.jM)(e,e=>{e.data.editorVersion=r.editorVersion})}case"PUBLISH":{const{type:o}=t.payload,s=(0,c.qT)(r);return"externalForce"===o?(0,O.jM)(s,e=>{e.dataVersion=e.dataVersion+1}):(0,C.n)(e,s)?e:(0,O.jM)(s,e=>{e.dataVersion=e.dataVersion+1})}case"UPDATE_DISABLED_ELEMENTS":{const r=t.payload;return(0,O.jM)(e,e=>{e.data.disabledElements=r,e.dataVersion=e.dataVersion+1})}case h.Q3.UPDATE_PINNED_ELEMENTS:{const r=t.payload;return(0,O.jM)(e,e=>{e.data.pinnedElements=r,e.dataVersion=e.dataVersion+1})}case h.Q3.IMPORT_KIT:{const{selectedKit:r}=t.payload;return(0,O.jM)(e,e=>{e.data.selectedKit=r,e.dataVersion=e.dataVersion+1})}case"UPDATE_CURRENT_KIT_ID":{const r=t.payload;return(0,O.jM)(e,e=>{e.data.selectedKit=r,e.dataVersion=e.dataVersion+1})}case h.Q3.IMPORT_STORY:case h.Q3.IMPORT_TEMPLATE:{const{styles:r,fonts:o}=t.payload;return r?.length||o?.length?(0,O.jM)(e,e=>{e.dataVersion=e.dataVersion+1}):e}case"ADD_FONTS":case"DELETE_FONTS":return(0,O.jM)(e,e=>{e.dataVersion=e.dataVersion+1});case"UPDATE_DEFAULT_FONT":{const r=t.payload;return(0,O.jM)(e,e=>{e.data.font=r,e.dataVersion=e.dataVersion+1})}default:return e}},styles:(e=[],t)=>{switch(t.type){case a:{const{project:e}=t.payload;return e.data.styles}case h.Q3.IMPORT_STORY:case h.Q3.IMPORT_TEMPLATE:case h.Q3.IMPORT_KIT:{const{styles:r}=t.payload;return r?e.find(e=>e.id===r[0].id)?e:[...r,...e]:e}case h.Q3.UPDATE_CURRENT_STYLE:return(0,O.jM)(e,e=>{for(let r=0;r<e.length;r++)e[r].id===t.payload.id&&(e[r]=t.payload)});case h.Q3.REGENERATE_TYPOGRAPHY:case h.Q3.REGENERATE_COLORS:return k(e)?e.map(e=>e.title===B&&e.id==v?t.payload:e):[...e,t.payload];default:return e}},currentStyleId:(e="",t,r)=>{switch(t.type){case"HYDRATE":{const{project:e}=t.payload;return e.data.selectedStyle}case h.Q3.UPDATE_CURRENT_STYLE_ID:return t.payload;case h.Q3.ADD_NEW_GLOBAL_STYLE:return t.payload.id;case h.Q3.REMOVE_GLOBAL_STYLE:return r.styles[0].id;case h.Q3.IMPORT_STORY:case h.Q3.IMPORT_TEMPLATE:{const{currentStyleId:r}=t.payload;return r||e}case h.Q3.REGENERATE_COLORS:case h.Q3.REGENERATE_TYPOGRAPHY:{const e=k(r.styles);return e?e.id:t.payload.id}default:return e}},currentStyle:(e,t,r)=>{switch(t.type){case"HYDRATE":{const{project:e}=t.payload,r=[...e.data.styles,...e.data.extraStyles??[]];return r.find(t=>t.id===e.data.selectedStyle)??r[0]}case h.Q3.UPDATE_CURRENT_STYLE:return t.payload;case h.Q3.UPDATE_CURRENT_STYLE_ID:{const e=t.payload,o=[...r.styles,...r.extraStyles??[]];return o.find(({id:t})=>t===e)??o[0]}case h.Q3.ADD_NEW_GLOBAL_STYLE:return t.payload;case h.Q3.REMOVE_GLOBAL_STYLE:return r.styles[0];case h.Q3.IMPORT_STORY:case h.Q3.IMPORT_TEMPLATE:{const{currentStyleId:o,styles:s}=t.payload,a=[...s??[],...r.styles,...r.extraStyles];return(o?a.find(e=>e.id===o):e)??e}case h.Q3.EDIT_GLOBAL_STYLE_NAME:return{...e,title:t.payload};case h.Q3.REGENERATE_TYPOGRAPHY:case h.Q3.REGENERATE_COLORS:return t.payload;default:return e}},ui:function(e=w,t){if("UPDATE_UI"===t.type){const{key:r,value:o}=t,s={...e,[r]:o};return"deviceMode"===r&&"manual"!==s.rightSidebar.lock&&("desktop"!==o?s.rightSidebar={...s.rightSidebar,isOpen:!0,lock:"auto"}:s.rightSidebar.isOpen&&(s.rightSidebar={...s.rightSidebar,isOpen:!1,lock:void 0})),s}return e},storeWasChanged:(e,t)=>{switch(t.type){case"HYDRATE":return m.O.unchanged;case"FETCH_PAGE_SUCCESS":return e===m.O.pending?m.O.unchanged:e;case"ADD_BLOCK":case h.Q3.REMOVE_BLOCK:case h.Q3.REMOVE_BLOCKS:case"REORDER_BLOCKS":case"UPDATE_BLOCKS":case"UPDATE_GLOBAL_BLOCK":case h.Q3.UPDATE_GLOBAL_BLOCK_METADATA:case"MAKE_BLOCK_TO_GLOBAL_BLOCK":case"MAKE_POPUP_TO_GLOBAL_POPUP":case"MAKE_GLOBAL_POPUP_TO_POPUP":case"MAKE_GLOBAL_BLOCK_TO_BLOCK":case"ADD_GLOBAL_BLOCK":case"ADD_GLOBAL_POPUP":case h.Q3.UPDATE_CURRENT_STYLE_ID:case h.Q3.UPDATE_CURRENT_STYLE:case h.Q3.REGENERATE_TYPOGRAPHY:case h.Q3.REGENERATE_COLORS:case"UPDATE_EXTRA_FONT_STYLES":case h.Q3.IMPORT_TEMPLATE:case h.Q3.IMPORT_STORY:case"UNDO":case"REDO":case h.Q3.CREATE_SYMBOL:case h.Q3.UPDATE_SYMBOL:case h.Q3.DELETE_SYMBOL:return m.O.changed;case"PUBLISH":return m.O.pending;case"STORE_WAS_CHANGED":return t.payload;case h.Q3.UPDATE_ERROR:return m.O.unchanged;default:return e}},extraStyles:(e=[],t,r)=>{switch(t.type){case"HYDRATE":{const{project:e}=t.payload;return e.data.extraStyles}case h.Q3.UPDATE_CURRENT_STYLE:{const o=r.currentStyleId;return(0,O.jM)(e,e=>{const r=e.findIndex(e=>e.id===o);-1!==r&&(e[r]=t.payload)})}case h.Q3.ADD_NEW_GLOBAL_STYLE:return[...e,t.payload];case h.Q3.REMOVE_GLOBAL_STYLE:return e.filter(e=>e.id!==t.payload);case h.Q3.EDIT_GLOBAL_STYLE_NAME:{const o=r.currentStyleId;return(0,O.jM)(e,e=>{const r=e.findIndex(e=>e.id===o);-1!==r&&(e[r].title=t.payload)})}default:return e}},blocksHtml:(e=P,t,r)=>{switch(t.type){case"HYDRATE":{const{page:r,globalBlocks:o,config:s}=t.payload,a=Object.values(o).map(e=>e.blocks||[]).flat(),n=(e=>e.reduce((e,t)=>(e[t.id]={html:t.html},e),{}))([...r.blocks||[],...a]),c=r.data?.items||[],i=c.map(e=>e.value.globalBlockId||e.value._id),l=(0,L.cV)({pageBlocksIds:i,page:r,globalBlocks:o,config:s});let d=l.reduce((e,t)=>{const r=n[t];return r&&(e[t]=r),e},{});const u=l.map(e=>o[e]||c.find(t=>t.value._id===e));return(0,T.p)({value:u},o).forEach(e=>{const t=e.value._id,r=n[t];r&&(d={...d,[t]:r})}),(0,O.jM)(e,e=>{e.blocks=d})}case h.Q3.REMOVE_BLOCKS:return P;case"UNDO":case"REDO":case h.Q3.IMPORT_TEMPLATE:case"UPDATE_BLOCKS":case"ADD_BLOCK":case"ADD_GLOBAL_BLOCK":case"ADD_GLOBAL_POPUP":case"UPDATE_GLOBAL_BLOCK":return e.inPending?e:(0,O.jM)(e,e=>{e.inPending=!0});case h.Q3.UPDATE_BLOCK_HTML:{const{blockId:r,data:o}=t.payload;return(0,O.jM)(e,e=>{e.blocks[r]=o})}case h.Q3.UPDATE_BLOCKS_HTML:{const{blocks:r}=t.payload;return(0,O.jM)(e,e=>{r.forEach(({id:t,block:r})=>{e.blocks[t]=r})})}case h.Q3.REMOVE_BLOCK:{const{index:o}=t.payload,s=(0,c.$L)(r),a=Object.keys(s),n=(0,c.G2)(r)[o];return a.includes(n)?e:(0,O.jM)(e,e=>{delete e.blocks[n]})}case h.Q3.UPDATE_BLOCK_HTML_STATS:{const{stats:r}=t.payload;return(0,O.jM)(e,e=>{e.inProcessing=r,e.initialized||(e.initialized=!0),0===r&&(e.inPending=!1),r>0&&!e.inPending&&(e.inPending=!0)})}case h.Q3.INITIALIZE_BLOCKS_HTML:return(0,O.jM)(e,e=>{e.initialized=!0});case"FETCH_PAGE_SUCCESS":return(0,O.jM)(e,e=>{e.blocks=Object.keys(e.blocks).reduce((e,t)=>(e[t]={html:""},e),{})});case n:{const{id:r}=t.payload;return(0,O.jM)(e,e=>{delete e.blocks[r]})}default:return e}},symbols:(e,t)=>{switch(t.type){case a:{const{symbols:e}=t.payload;return{element:void 0,classes:e??[]}}case h.Q3.CREATE_SYMBOL:{const{element:r,cssClasses:o}=t.payload;return(0,O.jM)(e,e=>{e.element=r,e.classes.push(...o)})}case h.Q3.UPDATE_SYMBOL:{const{element:r,cssClass:o}=t.payload;return(0,O.jM)(e,e=>{e.element=r,e.classes=e.classes.map(e=>e.uid===o.uid?o:e)})}case h.Q3.DELETE_SYMBOL:{const r=t.payload.filter(Boolean);return(0,O.jM)(e,e=>{e.classes=e.classes.filter(e=>!r.includes(e.uid))})}default:return e}},symbolsCSS:(e,t)=>{switch(t.type){case h.Q3.UPDDATE_SYMBOLS_CSS:return t.payload;case h.We:return{};default:return e}}},G={screenshots:(e,t,r,o)=>{switch(t.type){case"HYDRATE":case"PUBLISH":{const e=x(o.page.data),t={};for(const[e,r]of Object.entries(o.globalBlocks)){const o=r.data;if(I(o)){const r=o.value;t[e]={_thumbnailSrc:r._thumbnailSrc,_thumbnailWidth:r._thumbnailWidth,_thumbnailHeight:r._thumbnailHeight,_thumbnailTime:r._thumbnailTime}}Object.assign(t,x(o.value))}return{...e,...t,_published:{...e,...t}}}case h.Q3.UPDATE_SCREENSHOT:{const{payload:{blockId:r,data:o}}=t;return(0,O.jM)(e,e=>{e[r]=o})}case"MAKE_POPUP_TO_GLOBAL_POPUP":case"MAKE_BLOCK_TO_GLOBAL_BLOCK":{const{data:{value:{_id:r}},meta:o}=t.payload.block,s=(e=>{if(void 0!==e._thumbnailSrc&&void 0!==e._thumbnailWidth&&void 0!==e._thumbnailHeight&&void 0!==e._thumbnailTime)return{_thumbnailSrc:e._thumbnailSrc,_thumbnailWidth:e._thumbnailWidth,_thumbnailHeight:e._thumbnailHeight,_thumbnailTime:e._thumbnailTime}})(o);return s?(0,O.jM)(e,e=>{e[r]=s,e._published[r]=s}):e}default:return e}}},(e={},t)=>{const r={};return Object.entries(K).reduce((r,[o,s])=>(r[o]=s(e[o],t,e),r),r),Object.entries(G).reduce((r,[o,s])=>(r[o]=s(e[o],t,e,r),r),r),r}),{keysToTrack:["blocksOrder","blocksData","currentStyleId","currentStyle","extraFontStyles","storeWasChanged","extraStyles","symbols"],onBeforeUpdate:(e,t,r)=>{if("UPDATE_GB_RULES"===t.type||t.type===h.Q3.REMOVE_BLOCK||t.type===h.Q3.REMOVE_BLOCKS){const o=(0,c.G2)(e),s=(0,c.bb)(e);(t.type===h.Q3.REMOVE_BLOCKS?o:[t.payload.id]).forEach(e=>{if(o.includes(e)&&s[e]){const t=r.getSnapshots();r.replaceSnapshots(t.map(t=>(t?.blocksOrder&&(t.blocksOrder=t.blocksOrder.filter(t=>t!==e)),t)))}})}}});var K,G;var Q=r(75180),V=r(11410),N=r(63696),Y=r(26339),F=r(53816),H=r(41712);class ${instance;constructor(e){this.instance=Object.freeze(new H.cj(e))}getStyles(){return this.instance.getStyles()}purge(){this.instance.purge()}}var q=r(71468),W=r(51897),X=r(30236),Z=r(54145),J=r(66362),ee=r(62925),te=r(6230),re=r(91024),oe=r(72130),se=r(16765),ae=r(67377);class ne extends te.A{static get componentId(){return re.U.ThirdPartyItems}static defaultProps={meta:{},itemProps:{},sliceStartIndex:0,sliceEndIndex:1/0};getItemProps(e,t){const r={getItems:()=>[{id:"duplicate",type:"button",devices:"desktop",config:{icon:"nc-duplicate",title:(0,se.t)("Duplicate"),reverseTheme:!0},position:200,onClick:()=>{this.cloneItem(t)}},{id:"remove",type:"button",devices:"desktop",config:{icon:"nc-trash",title:(0,se.t)("Delete"),reverseTheme:!0},position:250,onClick:()=>{(0,ee.Ar)(),this.removeItem(t)}}]},o=this.makeToolbarPropsFromConfig2(r);return{meta:this.props.meta,toolbarExtend:o}}handleSortableAcceptElements=(e,t)=>{const{elementType:r,elementNode:o}=e,{acceptedElements:s=["column","shortcode","addable"]}=this.props;if(Array.isArray(s)){const e=-1!==s.indexOf(r),t=o.getAttribute((0,ae.uo)("sortable-subtype")),a=-1!==s.indexOf(t);return e||a}return e.sortableNode===t.sortableNode};renderItemsContainer(e){const{className:t}=this.props;return(0,oe.eg)(this.props.renderContext)?N.createElement("div",{className:t},e):0===e.length?N.createElement("div",{className:t},N.createElement(J.A,{path:this.getId(),type:"thirdPartyContainer",acceptElements:this.handleSortableAcceptElements})):N.createElement(Z.A,{path:this.getId(),type:"thirdPartyContainer",acceptElements:this.handleSortableAcceptElements},(r,o)=>N.createElement("div",{...o,ref:r,className:t},e))}}const ce=ne;function ie(e){const{editorProps:t}=(()=>{const e=(0,N.useContext)(X.l);if(!e)throw new Error("useThirdParty must be used within a ThirdPartyProvider");return e})(),{acceptedElements:r,className:o}=e;return N.createElement(ce,{...t,acceptedElements:r,className:o})}var le=r(7366);class de extends N.Component{constructor(e){super(e),this.register(e.config),(0,le.U)("getEditorElements",this.getEditorElements)}getEditorElements=()=>({Container:ie});register(e){const t=(0,W.Ay)(e);for(const e of Object.values(t))Y.A.registerComponent(e);Y.A.registerNotFoundComponent(W.X1);const r=e.thirdPartyComponents;r&&Object.values(r).forEach(e=>{Y.A.registerThirdPartyElement(e)})}render(){return this.props.children}}var ue=r(16486),pe=r(55247);const be=e=>{const{children:t,pageId:r,groups:o}=e,{sheet:s}=(0,pe.Y)(),a=(0,N.useMemo)(()=>({sheet:s,dynamicContent:{itemId:r,config:o}}),[r,o,s]);return N.createElement(ue.k.Provider,{value:a},t)};var _e=r(47310),he=r(26356),me=r(48917);function ge(e){const{sheet:t,store:r,config:o,children:a,editorMode:n}=e,c=me.F.init({resources:{}}),i=o.pageData?.id??"";return N.createElement(he.I,{sheet:t},N.createElement(_e.x,{i18n:c},N.createElement(q.Kq,{store:r},N.createElement(F.s,{config:o},N.createElement(de,{config:o},N.createElement(oe.Ku,{renderType:"view"},N.createElement(s.CZ,{mode:n},N.createElement(pe.N,null,N.createElement(be,{pageId:i},a)))))))))}var fe=r(78444),ye=r(2852),Ee=r(44295);r(71336),r(89858),r(8620);const Oe=JSON.parse('{"t":[{"name":"group-jq","path":"./editor/js/libs/common/jQuery","selectors":[".brz__group__jquery"]},{"name":"group-1","path":"./editor/js/libs/group-1","selectors":[".brz__group__jquery",".brz-forms",".brz-forms2",".brz-filters__main",".brz-translation"]},{"name":"group-1_2","path":"./editor/js/libs/group-1_2","selectors":[".brz__group__jquery",".brz-forms",".brz-forms2",".brz-filters__main",".brz-translation",".brz-slick-slider",".brz-carousel",".brz-countdown",".brz-countdown2",".brz-groupSlider"]},{"name":"group-1_3","path":"./editor/js/libs/group-1_3","selectors":[".brz__group__jquery",".brz-forms",".brz-forms2",".brz-filters__main",".brz-translation",".brz-animated",".brz-image__lightbox",".brz-image__gallery-lightbox",".brz-motion--effects",".brz-video__lightbox"]},{"name":"group-1_4","path":"./editor/js/libs/group-1_4","selectors":[".brz__group__jquery",".brz-forms",".brz-forms2",".brz-filters__main",".brz-translation",".brz-bg-slideshow"]},{"name":"group-1_5","path":"./editor/js/libs/group-1_5","selectors":[".brz__group__jquery",".brz-forms",".brz-forms2",".brz-filters__main",".brz-translation",".brz-forms2__calculated"]},{"name":"group-1_7","path":"./editor/js/libs/group-1_7","selectors":[".brz__group__jquery",".brz-forms",".brz-forms2",".brz-filters__main",".brz-translation",".brz-sermonLayout",".brz-sermonList",".brz-sermonDetail",".brz-sermonFeatured",".brz-staffFeatured",".brz-articleLayout",".brz-staffLayout",".brz-articleList",".brz-articleDetail",".brz-articleFeatured"]},{"name":"group-2","path":"./editor/js/libs/group-2","selectors":[".brz__group__jquery",".brz-slick-slider",".brz-carousel",".brz-countdown",".brz-countdown2",".brz-groupSlider"]},{"name":"group-2_3","path":"./editor/js/libs/group-2_3","selectors":[".brz__group__jquery",".brz-slick-slider",".brz-carousel",".brz-countdown",".brz-countdown2",".brz-groupSlider",".brz-animated",".brz-image__lightbox",".brz-image__gallery-lightbox",".brz-motion--effects",".brz-video__lightbox"]},{"name":"group-2_4","path":"./editor/js/libs/group-2_4","selectors":[".brz__group__jquery",".brz-slick-slider",".brz-carousel",".brz-countdown",".brz-countdown2",".brz-groupSlider",".brz-bg-slideshow"]},{"name":"group-2_5","path":"./editor/js/libs/group-2_5","selectors":[".brz__group__jquery",".brz-slick-slider",".brz-carousel",".brz-countdown",".brz-countdown2",".brz-groupSlider",".brz-forms2__calculated"]},{"name":"group-2_7","path":"./editor/js/libs/group-2_7","selectors":[".brz__group__jquery",".brz-slick-slider",".brz-carousel",".brz-countdown",".brz-countdown2",".brz-groupSlider",".brz-sermonLayout",".brz-sermonList",".brz-sermonDetail",".brz-sermonFeatured",".brz-staffFeatured",".brz-articleLayout",".brz-staffLayout",".brz-articleList",".brz-articleDetail",".brz-articleFeatured"]},{"name":"group-3","path":"./editor/js/libs/group-3","selectors":[".brz__group__jquery",".brz-animated",".brz-image__lightbox",".brz-image__gallery-lightbox",".brz-motion--effects",".brz-video__lightbox"]},{"name":"group-3_4","path":"./editor/js/libs/group-3_4","selectors":[".brz__group__jquery",".brz-animated",".brz-image__lightbox",".brz-image__gallery-lightbox",".brz-motion--effects",".brz-video__lightbox",".brz-bg-slideshow"]},{"name":"group-3_5","path":"./editor/js/libs/group-3_5","selectors":[".brz__group__jquery",".brz-animated",".brz-image__lightbox",".brz-image__gallery-lightbox",".brz-motion--effects",".brz-video__lightbox",".brz-forms2__calculated"]},{"name":"group-3_7","path":"./editor/js/libs/group-3_7","selectors":[".brz__group__jquery",".brz-animated",".brz-image__lightbox",".brz-image__gallery-lightbox",".brz-motion--effects",".brz-video__lightbox",".brz-sermonLayout",".brz-sermonList",".brz-sermonDetail",".brz-sermonFeatured",".brz-staffFeatured",".brz-articleLayout",".brz-staffLayout",".brz-articleList",".brz-articleDetail",".brz-articleFeatured"]},{"name":"group-4","path":"./editor/js/libs/group-4","selectors":[".brz-bg-slideshow"]},{"name":"group-4_5","path":"./editor/js/libs/group-4_5","selectors":[".brz-bg-slideshow",".brz-forms2__calculated"]},{"name":"group-4_7","path":"./editor/js/libs/group-4_7","selectors":[".brz-bg-slideshow",".brz-sermonLayout",".brz-sermonList",".brz-sermonDetail",".brz-sermonFeatured",".brz-staffFeatured",".brz-articleLayout",".brz-staffLayout",".brz-articleList",".brz-articleDetail",".brz-articleFeatured"]},{"name":"group-5","path":"./editor/js/libs/group-5","selectors":[".brz-forms2__calculated"]},{"name":"group-5_7","path":"./editor/js/libs/group-5_7","selectors":[".brz-forms2__calculated",".brz-sermonLayout",".brz-sermonList",".brz-sermonDetail",".brz-sermonFeatured",".brz-staffFeatured",".brz-articleLayout",".brz-staffLayout",".brz-articleList",".brz-articleDetail",".brz-articleFeatured"]},{"name":"group-7","path":"./editor/js/libs/group-7","selectors":[".brz-sermonLayout",".brz-sermonList",".brz-sermonDetail",".brz-sermonFeatured",".brz-staffFeatured",".brz-articleLayout",".brz-staffLayout",".brz-articleList",".brz-articleDetail",".brz-articleFeatured"]},{"name":"group-all","path":"./editor/js/libs/group-all","selectors":[".brz__group__jquery",".brz-forms",".brz-forms2",".brz-filters__main",".brz-translation",".brz-slick-slider",".brz-carousel",".brz-countdown",".brz-countdown2",".brz-groupSlider",".brz-animated",".brz-image__lightbox",".brz-image__gallery-lightbox",".brz-motion--effects",".brz-video__lightbox",".brz-bg-slideshow",".brz-forms2__calculated",".brz-sermonLayout",".brz-sermonList",".brz-sermonDetail",".brz-sermonFeatured",".brz-staffFeatured",".brz-articleLayout",".brz-staffLayout",".brz-articleList",".brz-articleDetail",".brz-articleFeatured"]}],"A":[{"name":"group-1","path":"./editor/js/libs/group-1-pro","selectors":[".brz-image__gallery",".brz-posts--masonry"]},{"name":"group-1_2","path":"./editor/js/libs/group-1_2-pro","selectors":[".brz-image__gallery",".brz-posts--masonry",".brz-menu__mmenu",".brz-mega-menu__portal",".brz-menu__sub-menu",".brz-menu__preview",".brz-tooltip","[data-tooltip]","[data-brz-tooltip]"]},{"name":"group-1_3","path":"./editor/js/libs/group-1_3-pro","selectors":[".brz-image__gallery",".brz-posts--masonry",".brz-lottie"]},{"name":"group-1_4","path":"./editor/js/libs/group-1_4-pro","selectors":[".brz-image__gallery",".brz-posts--masonry",".brz-chart"]},{"name":"group-2","path":"./editor/js/libs/group-2-pro","selectors":[".brz-menu__mmenu",".brz-mega-menu__portal",".brz-menu__sub-menu",".brz-menu__preview",".brz-tooltip","[data-tooltip]","[data-brz-tooltip]"]},{"name":"group-2_3","path":"./editor/js/libs/group-2_3-pro","selectors":[".brz-menu__mmenu",".brz-mega-menu__portal",".brz-menu__sub-menu",".brz-menu__preview",".brz-tooltip","[data-tooltip]","[data-brz-tooltip]",".brz-lottie"]},{"name":"group-2_4","path":"./editor/js/libs/group-2_4-pro","selectors":[".brz-menu__mmenu",".brz-mega-menu__portal",".brz-menu__sub-menu",".brz-menu__preview",".brz-tooltip","[data-tooltip]","[data-brz-tooltip]",".brz-chart"]},{"name":"group-3","path":"./editor/js/libs/group-3-pro","selectors":[".brz-lottie"]},{"name":"group-3_4","path":"./editor/js/libs/group-3_4-pro","selectors":[".brz-lottie",".brz-chart"]},{"name":"group-4","path":"./editor/js/libs/group-4-pro","selectors":[".brz-chart"]},{"name":"group-all","path":"./editor/js/libs/group-all-pro","selectors":[".brz-image__gallery",".brz-posts--masonry",".brz-menu__mmenu",".brz-mega-menu__portal",".brz-menu__sub-menu",".brz-menu__preview",".brz-tooltip","[data-tooltip]","[data-brz-tooltip]",".brz-lottie",".brz-chart"]}]}');var ze=r(13686),Le=r(76999),Ae=r(97493),Te=r(14102);const Pe=e=>{const t=e.urls?.prefetchFonts,r=['<link class="brz-link brz-link-bunny-fonts-prefetch" rel="dns-prefetch" href="//fonts.bunny.net">','<link class="brz-link brz-link-bunny-fonts-preconnect" rel="preconnect" href="https://fonts.bunny.net/" crossorigin>'];return t&&r.push(`<link class="brz-link brz-link-cdn-preconnect" rel="preconnect" href="${t}" crossorigin>`),r};var Se=r(63428);const Be=e=>{let t="";return e((0,ae.pk)({name:"custom-css"})).each(function(){const r=e(this),o=r.attr((0,ae.uo)("custom-id"))||"";t+=r.attr((0,ae.uo)("custom-css"));const s=r.children();s.attr((0,ae.uo)("custom-id"),o),r.replaceWith(s)}),0===t.length?[]:[t]};var ve=r(75928),ke=r(83293);const je=(e,t)=>{const r=[],o=e(".brz-rich-text");return o.find(".brz-tp__dc-block[data-color]").each(function(){const o=e(this),s=o.attr("data-color")||"",a=(0,Se.uv)(s),n=`dc-color-${(0,ke.uR)(5)}`;o.addClass(n),o.removeAttr("data-color");const c=Object.entries(a).reduce((e,[r,o])=>{const s=`.${n} ${r}`,a=(0,ve.Vw)(s,o,t);return a&&e.push(a),e},[]).join("");r.push(c)}),o.find("[data-color]").each(function(){e(this).removeAttr("data-color")}),0===r.length?[]:r},Me=e=>`https://use.typekit.net/${e}.css`,De=e=>!0!==e.deleted,Re=({google:e,upload:t,extra:r,config:o})=>{const{adobeKitId:s}=r??{},a=e.filter(De),n=t.filter(De),c=a.length?`https://fonts.bunny.net/css?family=${a.reduce((e,t)=>{const r=t.family.replace(/\s/g,"+"),o=t.variants.join();return""===e?`${r}:${o}`:`${e}|${r}:${o}`},"")}&subset=arabic,bengali,cyrillic,cyrillic-ext,devanagari,greek,greek-ext,gujarati,hebrew,khmer,korean,latin-ext,tamil,telugu,thai,vietnamese&display=swap`:void 0,i=n.length?((e,t)=>{const r=t.urls?.editorFonts;return`${r}${e.reduce((e,{id:t,weights:r})=>{const o=r.join();return""===e?`${t}:${o}`:`${e}|${t}:${o}`},"")}`})(n,o):void 0;return{google:c,upload:i,...s?{adobe:Me(s)}:{}}},Ce=(e,t)=>(0,Te.C)(t)?e:{...e,rel:"stylesheet"},Ie=e=>e.replace(/&(quot|#x27|amp|gt);/g,e=>{switch(e){case"&quot;":return'"';case"&#x27;":return"'";case"&amp;":return"&";case"&gt;":return">"}return""}),xe=e=>{const{free:t,pro:r}=(e=>{const{$root:t,fonts:r,css:o,config:s,extra:a}=e,{t:n=[],A:c=[]}=Oe,i={name:"main",score:Ae.tk,content:{type:"file",url:(0,ze.R)("editor/css/preview.min.css",s),attr:Ce({class:"brz-link brz-link-preview"},s)},pro:!1},l=[],d=(e=>{const{fonts:t,extra:r,config:o}=e,{google:s,upload:a,adobe:n}=Re({...t,extra:r,config:o}),c=[];return n&&c.push({name:"adobe",type:"adobe-font",score:Ae.BO,content:{type:"file",url:n,attr:Ce({class:"brz-link brz-link-adobe",type:"text/css"},o)},pro:!0}),s&&c.push({name:"google",type:"google-font",score:Ae.BO,content:{type:"file",url:s,attr:Ce({class:"brz-link brz-link-google",type:"text/css"},o)},pro:!1}),a&&c.push({name:"upload",type:"uploaded-font",score:Ae.BO,content:{type:"file",url:a,attr:Ce({class:"brz-link brz-link-upload",type:"text/css"},o)},pro:!1}),c})({fonts:r,extra:a,config:s}),u=((e,t)=>{const r=Re({...e,config:t})?.google;return r?[{name:"projectPrefetchFonts",score:Ae.BO,content:{type:"code",content:Pe(t).join(" ")},pro:!1}]:[]})(r,s),p={name:"metaViewport",score:Ae.BO,content:{type:"code",content:'<meta name="viewport" content="width=device-width, initial-scale=1">'},pro:!1};l.push(p);const b=Be(t).map((e,t)=>({name:(0,Se.Ns)(e),score:Ae.AM,content:{type:"inline",content:Ie(e),attr:{id:`brz-custom-css-${t}`,class:"brz-style"}},pro:!1}));l.push(...b);const _=((e,t)=>je(e,t).map((e,t)=>({name:(0,Se.Ns)(e),score:Ae.$Y,content:{type:"inline",content:e,attr:{id:`brz-dc-color-${t}`,class:"brz-style"}},pro:!1})))(t,s);l.push(..._);const h=(e=>{const t=[],{default:r,rules:o,custom:s}=e;for(const e of r)t.push({name:(0,Se.Ns)(e.cssText),score:Ae.aA,content:{type:"inline",content:e.cssText,attr:{class:"brz-style"}},pro:!1});for(const e of o)t.push({name:(0,Se.Ns)(e.cssText),score:Ae.cM,content:{type:"inline",content:e.cssText,attr:{class:"brz-style"}},pro:!1});for(const e of s)t.push({name:(0,Se.Ns)(e.cssText),score:Ae.yO,content:{type:"inline",content:e.cssText,attr:{class:"brz-style"}},pro:!1});return t})(o);l.push(...h),(s.thirdPartyUrls??[]).forEach(({styleUrl:e})=>{e&&l.push({name:`third-party-${(0,Se.Ns)(e)}`,score:Ae.oj,pro:!1,content:{type:"file",url:e}})});const m=[],g=new Set;n.forEach(e=>{const{name:r,selectors:o}=e;m.push({name:r,selectors:o,score:Ae.GA,content:{type:"file",url:(0,ze.R)(`editor/css/${r}.min.css`,s),attr:Ce({class:"brz-link brz-link-preview-lib",...(0,ae.Mx)({name:"group",value:r})},s)},pro:!1}),o.forEach(e=>{t(e).length&&g.add(e)})});const f={free:{main:i,pageFonts:d,pageStyles:u,generic:l,libsMap:m,libsSelectors:[...g]}},y=s.pro;if(y){const e=[],r=new Set,o=[],a={name:"main",score:Ae.tk,content:{type:"file",url:(0,Le.U)(y,"css/preview.pro.min.css"),attr:Ce({class:"brz-link brz-link-preview-pro"},s)},pro:!0};c.forEach(e=>{const{name:a,selectors:n}=e;o.push({name:a,selectors:n,score:Ae.GA+1,content:{type:"file",url:(0,Le.U)(y,`css/${a}-pro.min.css`),attr:Ce({class:"brz-link brz-link-preview-lib-pro",...(0,ae.Mx)({name:"group",value:a})},s)},pro:!0}),n.forEach(e=>{t(e).length&&r.add(e)})}),f.pro={main:a,generic:e,libsMap:o,libsSelectors:[...r]}}return f})(e),{free:o,pro:s}=((e,t)=>{const{t:r=[],A:o=[]}=Oe,s=new Set,a=[],{editorVersion:n,pro:c}=t,i={name:"main",score:Ae.tk,content:{type:"file",url:(0,ze.R)("editor/js/preview.min.js",t),attr:{class:"brz-script brz-script-preview",defer:"true"}},pro:!1};r.forEach(r=>{const{name:o,selectors:n}=r;a.push({name:o,selectors:n,score:Ae.GA,content:{type:"file",url:(0,ze.R)(`editor/js/${o}.min.js`,t),attr:{class:"brz-script brz-script-preview-lib",defer:"true",...(0,ae.Mx)({name:"group",value:o})}},pro:!1}),n.forEach(t=>{e(t).length&&s.add(t)})}),0===s.size&&s.add(".brz__group__jquery");const l={free:{main:i,version:n,generic:[],libsMap:a,libsSelectors:[...s]}};if(c){const t=[],r=new Set,s=[],a={name:"main",score:Ae.tk,content:{type:"file",url:(0,Le.U)(c,"js/preview.pro.min.js"),attr:{class:"brz-script brz-script-preview-pro",defer:"true"}},pro:!0};o.forEach(t=>{const{name:o,selectors:a}=t;s.push({name:o,selectors:a,score:Ae.GA+1,content:{type:"file",url:(0,Le.U)(c,`js/${o}.pro.min.js`),attr:{class:"brz-script brz-script-preview-lib-pro",defer:"true",...(0,ae.Mx)({name:"group",value:o})}},pro:!0}),a.forEach(t=>{e(t).length&&r.add(t)})}),l.pro={main:a,version:c.version??"",generic:t,libsMap:s,libsSelectors:[...r]}}return l})(e.$root,e.config);return{freeStyles:t,freeScripts:o,...r&&{proStyles:r},...s&&{proScripts:s}}},we=e=>{e((0,ae.pk)({name:"mmenu-id"})).each(function(){const t=(0,ke.uR)(),r=e(this),o=r.children(".brz-menu__mmenu");r.attr((0,ae.uo)("mmenu-id"),`#${t}`),o&&o.attr("id",t)})};var Ue=r(94009);const Ke=/data-brz-(.+)-/,Ge=["data-brz-onclick-event","data-brz-onsubmit-event"],Qe=e=>{const t=Ge.map(e=>`[${e}]`).join(",");e(t).each(function(){const t=e(this),r=Object.entries(t.attr()).filter(e=>{const[t]=e;return(0,Ue.bt)(t)});for(let e=0;e<r.length;e++){const[o,s]=r[e],a=Ke.exec(o);if(a)try{const[e,r]=a;t.attr(r,s),t.removeAttr(o)}catch(e){}}})};var Ve=r(36871);const Ne=e=>{const{store:t,sheet:r,config:o,Page:s}=e,a=t.getState(),n=(0,c.gI)(a);(0,Ee.wH)();const i=ye.renderToStaticMarkup(s),l=r.getCSSOrdered(),d=(e=>e.map(e=>({name:"symbol",score:Ae.$f,content:{type:"inline",content:e.cssText},attr:{class:e.className}})))(l.symbol),u=fe.Ay.load(`<html>\n      <head></head>\n      <body>${i}</body>\n    </html>`,{decodeEntities:!1});we(u),Qe(u);const p=(e=>{const{fonts:t,parsedFonts:r,defaultFont:o,projectDefaultFontId:s}=e,{upload:a=[],google:n=[],system:c=[],adobe:i=[]}=(0,Ve.EH)(t);let l=!1;const{fonts:d}={fonts:{google:[],upload:[],adobe:[],system:[]}},u=t?.adobe?.id;if(r.forEach(({type:e,family:t})=>{switch(l||(l=s===t),e){case"adobe":{const e=(0,Ve.oh)(i,t);e&&u&&d.adobe.push(e);break}case"system":{const e=(0,Ve.oh)(c,t);e&&d.system.push(e);break}case"upload":{const e=(0,Ve.oh)(a,t,"upload");e&&d.upload.push(e);break}case"google":{const e=(0,Ve.oh)(n,t);e&&d.google.push(e);break}}}),!l){const{group:e,font:t}=o;switch(e){case"upload":d.upload.push(t);break;case"system":d.system.push(t);break;case"adobe":d.adobe.push(t);break;default:d.google.push(t)}}return{fonts:d,adobeKitId:u}})({projectDefaultFontId:n,parsedFonts:(0,Ee.YW)(),fonts:(0,c.K2)(a),defaultFont:(0,c._K)(a)}),{fonts:b,adobeKitId:_}=p,{freeScripts:h,freeStyles:m,proScripts:g,proStyles:f}=xe({$root:u,fonts:b,css:l,config:o,extra:{adobeKitId:_}}),y=(e=>e.replace(/data-brz-dcatts=(["'])(.*?)\1/g,"$2"))(u("body").html()??"");return r.purge(),(0,Ee.wH)(),{html:y,assets:{freeScripts:h,freeStyles:m,proScripts:g,proStyles:f},symbols:d}},Ye=e=>{const{block:t,store:r,editorMode:o}=e,{Page:s}=Y.A.getComponents(),a=(0,F.U)(),n=(0,N.useCallback)(()=>a,[a]);if(!s)throw Error("Missing Page Components",Y.A.getComponents());const c=r.getState(),i={items:[t]};return N.createElement(N.Fragment,null,N.createElement(s,{dbValue:i,reduxStore:r,reduxState:c,renderContext:"view",editorMode:o,getGlobalConfig:n}))},Fe=e=>{const{block:t,store:r,config:o,editorMode:s}=e,a=new $,n=N.createElement(ge,{store:r,sheet:a.instance,config:o,editorMode:s},N.createElement(Ye,{block:t,store:r,editorMode:s}));return Ne({Page:n,sheet:a.instance,store:r,config:o})};var He=r(30936);const $e=e=>{const{block:t,store:r,editorMode:o,className:s}=e,{PagePopup:a}=Y.A.getComponents(),n=(0,F.U)(),c=(0,N.useCallback)(()=>n,[n]);if(!a)throw Error("Missing PagePopup Components",Y.A.getComponents());const i=r.getState(),l={items:[t]};return N.createElement(N.Fragment,null,N.createElement(a,{className:s,dbValue:l,reduxStore:r,reduxState:i,renderContext:"view",editorMode:o,getGlobalConfig:c}))},qe=e=>{const{block:t,store:r,config:o,editorMode:s}=e,a=(0,A.QY)(o),n=(0,A.kV)(o)?(0,He.l)(o):void 0,c=new $,i=N.createElement(ge,{store:r,sheet:c.instance,config:o,editorMode:s},N.createElement($e,{block:t,className:n,store:r,editorMode:s})),l=Ne({store:r,Page:i,sheet:c.instance,config:o});if(a)return l;const d=(0,V.n)(o,r),u=(0,z.O6)(l,["assets","freeStyles","pageStyles"])??[],p=(0,z.KV)(u,d);return(0,z.Oe)(l,["assets","freeStyles","pageStyles"],p)},We=e=>{const{block:t,store:r,editorMode:o}=e,{PageStory:s}=Y.A.getComponents(),a=(0,F.U)(),n=(0,N.useCallback)(()=>a,[a]);if(!s)throw Error("Missing PageStory Components",Y.A.getComponents());const c=r.getState(),i={items:[t]};return N.createElement(N.Fragment,null,N.createElement(s,{dbValue:i,reduxStore:r,reduxState:c,renderContext:"view",editorMode:o,getGlobalConfig:n}))},Xe=e=>{const{block:t,store:r,config:o,editorMode:s}=e,a=new $,n=N.createElement(ge,{store:r,sheet:a.instance,config:o,editorMode:s},N.createElement(We,{block:t,store:r,editorMode:s}));return Ne({store:r,Page:n,sheet:a.instance,config:o})};async function Ze(e){const{config:t,page:r,project:n,editorMode:d}=e,{globalBlocks:u=[],symbols:p}=t,{fonts:h}=n.data,m=function({middleware:e=[]}={middleware:[]}){return b(U,_(i.reduxBatch,function(...e){return t=>(r,o)=>{const s=t(r,o);let a=()=>{throw new Error(l(15))};const n={getState:s.getState,dispatch:(e,...t)=>a(e,...t)},c=e.map(e=>e(n));return a=_(...c)(s.dispatch),{...s,dispatch:a}}}(...e)))}(),g=u?.reduce((e,t)=>(e[t.uid]=t,e),{})??{},f=(0,o.A)(h,{system:{data:Q.VY}});m.dispatch(function({project:e,projectStatus:t,fonts:r,page:o,globalBlocks:s,authorized:n,syncAllowed:c,config:i,editorMode:l,symbols:d}){return{type:a,payload:{project:e,projectStatus:t,fonts:r,page:o,globalBlocks:s,authorized:n,syncAllowed:c,config:i,editorMode:l,symbols:d}}}({page:r,project:n,fonts:f,globalBlocks:g,config:t,projectStatus:{},editorMode:d,symbols:p}));const y=(0,c.zT)(m.getState(),t),E={store:m,config:t,editorMode:d},O={styles:(0,V.n)(t,m)};return(0,s.Bs)(d)?{project:O,blocks:y.map(e=>({id:e.value._id,block:qe({...E,block:e})}))}:(0,s.mV)(d)?{project:O,blocks:y.map(e=>({id:e.value._id,block:Xe({...E,block:e})}))}:{project:O,blocks:y.map(e=>({id:e.value._id,block:Fe({...E,block:e})}))}}},76301:(e,t,r)=>{"use strict";var o=r(25879);Object.defineProperty(t,"reduxBatch",{enumerable:!0,get:function(){return o.reduxBatch}})}}]);