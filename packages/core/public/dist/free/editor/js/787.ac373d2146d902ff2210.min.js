"use strict";(self.webpackChunk_brizy_builder=self.webpackChunk_brizy_builder||[]).push([[787],{46787:(e,t,r)=>{r.r(t),r.d(t,{bootstrap:()=>qe});var s=r(33979),o=r(80810);const a="HYDRATE",n="DELETE_GLOBAL_BLOCK";var c=r(61642),l=r(13501),i=r(45106),d=r(78338),u=r(67819),p=r(37219);const _="UNDO";class b{snapshots=[];config={maxSize:20,collapseFrequency:2e3};currentIndex=-1;previousIndex=-1;lastSnapshotTimestamp=0;canUndo_=!1;canRedo_=!1;constructor(e){e&&(this.config=e),this.snapshots=new Array(this.config.maxSize).fill(null)}getSnapshots(){return this.snapshots}getCurrentSnapshot(){return this.snapshots[this.currentIndex]??null}getPreviousSnapshot(){return this.snapshots[this.previousIndex]??null}getSnapshot(e){if(e>0){const t=e-1;return this.snapshots[t]??null}{const t=this.snapshots.filter((e=>null!==e)).length+e;return this.snapshots[t]??null}}update(e,t){if(Object.keys(e).some((t=>e[t]!==this.snapshots[this.currentIndex]?.[t]))){const r=e,s=Date.now();if(t?.replacePresent)this.snapshots[this.currentIndex]=r;else{if(this.snapshots[this.currentIndex+1]&&null!==this.snapshots[this.currentIndex+1]){this.previousIndex=this.currentIndex,this.currentIndex++,this.snapshots[this.currentIndex]=r;for(let e=this.currentIndex+1;e<=this.snapshots.length-1;e++)this.snapshots[e]=null}else if(s-this.lastSnapshotTimestamp>this.config.collapseFrequency)if(this.currentIndex===this.snapshots.length-1){for(let e=0;e<=this.snapshots.length-2;e++)this.snapshots[e]=this.snapshots[e+1];this.snapshots[this.snapshots.length-1]=r}else this.previousIndex=this.currentIndex,this.currentIndex++,this.snapshots[this.currentIndex]=r;else this.snapshots[this.currentIndex]=r;this.updateFlags(),this.lastSnapshotTimestamp=s}}}replaceSnapshots(e){if(e.length!==this.snapshots.length)throw new Error("History. snapshots must be of same lengths");for(let t=0;t<this.snapshots.length;t++)if(null===this.snapshots[t]&&null!==e[t]||null!==this.snapshots[t]&&null===e[t])throw new Error("History. only patch snapshots supported for now");this.snapshots=e}canUndo(){return this.canUndo_}undo(){this.canUndo()&&(this.previousIndex=this.currentIndex,this.currentIndex--,this.updateFlags())}canRedo(){return this.canRedo_}redo(){this.canRedo()&&(this.previousIndex=this.currentIndex,this.currentIndex++,this.updateFlags())}updateFlags(){this.canUndo_=this.currentIndex>0,this.canRedo_=Boolean(this.snapshots[this.currentIndex+1]&&null!==this.snapshots[this.currentIndex+1])}}function m(e,t){return{...e,history:{currSnapshot:t.getCurrentSnapshot(),prevSnapshot:t.getPreviousSnapshot(),canUndo:t.canUndo(),canRedo:t.canRedo()}}}var h=r(5188),g=r(70634),y=r(83327),E=r(10561),f=r(90097),O=r(25582);const z={inProcessing:0,inPending:!1,blocks:{},initialized:!1},L={value:{items:[]},path:[]},T="REGENERATED",A="u2354e9A74GE",P=e=>e.find((e=>e.title===T&&e.id===A));var S=r(92775),M=r(83691),k=r(53278);(0,h.Fl)(!1);var B=r(22402),U=r(28986);const v=e=>e.type&&e.value&&e.value._id&&e.value._thumbnailSrc;function D(e){const t={};return(0,f.s)(e,(e=>{if(v(e)){const r=e.value;t[e.value._id]={_thumbnailSrc:r._thumbnailSrc,_thumbnailWidth:r._thumbnailWidth,_thumbnailHeight:r._thumbnailHeight,_thumbnailTime:r._thumbnailTime}}})),t}const C={deviceMode:"desktop",activeElement:null,leftSidebar:{drawerContentType:null},rightSidebar:{type:"options",isOpen:!1,lock:void 0,alignment:"right",activeTab:void 0},showHiddenElements:!1,currentRole:"default",currentLanguage:"default"},R=function(e,t){const r=new b;return function(s,o){switch(o.type){case _:case"REDO":{const e=o.type===_?r.canUndo():r.canRedo(),t=o.type===_?r.undo:r.redo;return e?(t.call(r),m({...s,...r.getCurrentSnapshot(),storeWasChanged:u.w.changed},r)):"object"==typeof(a=s).history&&null!==a.history&&(0,p.s_)(["currSnapshot","prevSnapshot","canUndo","canRedo"],a.history)?s:m({...s,...r.getCurrentSnapshot(),storeWasChanged:u.w.changed},r)}default:{const a=e(s,o);if(!o.type.includes("@@redux/INIT")){t.onBeforeUpdate&&t.onBeforeUpdate(s,o,r);const e=function(e,t){return t.reduce(((t,r)=>(t[r]=e[r],t)),{})}(a,t.keysToTrack);r.update(e,{replacePresent:Boolean(o?.meta?.historyReplacePresent)})}return m(a,r)}}var a}}((I={authorized:(e,t)=>{switch(t.type){case"HYDRATE":{const{authorized:e}=t.payload;return e}case"UPDATE_AUTHORIZATION":return t.payload;default:return e}},syncAllowed:(e,t)=>{switch(t.type){case"HYDRATE":{const{syncAllowed:e}=t.payload;return e}case"UPDATE_SYNC_ALLOWED":return t.payload;default:return e}},blocksData:(e={},t,r)=>{switch(t.type){case"HYDRATE":{const{page:e,globalBlocks:r,editorMode:s}=t.payload,a=e.data?.items||[];if((0,o.zK)(s)&&0===a.length)return{ecupxjcqmrpxjdimoebbkbnotrlufkfokjvr:{type:"Story",value:{_styles:["story"],items:[{type:"StoryItem",value:{_styles:["story-item"],items:[],_id:"dfmwxzkwbiaezltvsxhdinhplvimzenkiqto"}}],_id:"ecupxjcqmrpxjdimoebbkbnotrlufkfokjvr"},blockId:"StoryDefault"}};const n=a.reduce(((e,t)=>{const r=(0,h.Uy)(t,(e=>{delete e.meta})),{_id:s,globalBlockId:o}=r.value;return e[o||s]=r,e}),{}),c=Object.entries(r).reduce(((e,[t,r])=>(e[t]=(0,h.Uy)(r.data,(e=>{e.value._id=t})),e)),{});return(0,h.Uy)({...n,...c},(e=>{(0,f.s)(e,(e=>{if(e.type&&"GlobalBlock"===e.type){const{globalBlockId:t}=e.value;t&&(e.value._id=t,delete e.value.globalBlockId)}}))}))}case d.MF.IMPORT_STORY:{const{blocks:s}=t.payload,{insertIndex:o}=t.meta,a=(0,c._E)(r)[0],n=(0,E.ZC)(e[a].value.items,o,s);return(0,g.tP)(e,[a,"value","items"],n)}case"ADD_BLOCK":{const{block:r}=t.payload;return{...e,[r.value._id]:r}}case"MAKE_POPUP_TO_GLOBAL_POPUP":{const{block:{data:r},fromBlockId:s}=t.payload,o=(0,E.dl)((e=>e.value._id===s?(0,y.Uw)({blockId:e.blockId,uid:r.value._id}):e),e);return(0,h.Uy)(o,(e=>{e[r.value._id]=r}))}case"MAKE_GLOBAL_POPUP_TO_POPUP":{const{block:r,fromBlockId:s,type:o}=t.payload;if("external"===o)return{...e,[r.value._id]:r};const a=t.payload.parentId,n=e=>e.value._id===s?r:e,c=e=>(0,E.vP)(e)?(0,p.UI)(c,n(e)):(0,p.UI)(c,e),l=e=>!!(0,E.vP)(e)&&e.value._id===a,i=e=>l(e)?c(e):(0,p.UI)(i,e);return i(e)}case"MAKE_GLOBAL_BLOCK_TO_BLOCK":{const{block:r}=t.payload;return{...e,[r.value._id]:r}}case"MAKE_BLOCK_TO_GLOBAL_BLOCK":{const{block:{data:r},fromBlockId:s}=t.payload;return(0,h.Uy)(e,(e=>{e[r.value._id]=r,delete e[s]}))}case n:{const{id:r}=t.payload;return(0,h.Uy)(e,(e=>{delete e[r]}))}case d.MF.REMOVE_BLOCK:{const{index:s}=t.payload,o=(0,c.AV)(r),a=Object.keys(o),n=(0,c._E)(r)[s];return a.includes(n)?e:(0,h.Uy)(e,(e=>{delete e[n]}))}case d.MF.REMOVE_BLOCKS:{const t=(0,c._E)(r),s=(0,c.AV)(r),o=Object.keys(s),a=t.filter((e=>!o.includes(e)));return(0,h.Uy)(e,(e=>{a.forEach((t=>{delete e[t]}))}))}case"UPDATE_GLOBAL_BLOCK":{const{uid:r,data:s}=t.payload;return null===s.value?e:{...e,[r]:s}}case d.MF.IMPORT_TEMPLATE:case"UPDATE_BLOCKS":{const{blocks:r}=t.payload,s=r.reduce(((e,t)=>("GlobalBlock"===t.type||(e[t.value._id]=t),e)),{});return{...e,...s}}default:return e}},copiedElement:(e=L,t)=>t.type===d.MF.COPY_ELEMENT?{...e,...t.value}:e,error:(e=null,t)=>{switch(t.type){case"HYDRATE":{const{projectStatus:r}=t.payload;return r&&r.locked?{code:S.SM.PROJECT_LOCKED_ERROR,data:r}:e}case d.MF.UPDATE_ERROR:return t.payload;default:return e}},extraFontStyles:(e=[],t)=>{switch(t.type){case"HYDRATE":{const{project:e}=t.payload;return e.data.extraFontStyles??[]}case"UPDATE_EXTRA_FONT_STYLES":return t.payload;case d.MF.IMPORT_TEMPLATE:case"ADD_BLOCK":case"ADD_GLOBAL_BLOCK":case"ADD_GLOBAL_POPUP":{const{extraFontStyles:r}=t.payload;return r&&0!==r.length?[...e,...r]:e}default:return e}},fonts:(e={},t)=>{switch(t.type){case"HYDRATE":{const{fonts:e}=t.payload;return e}case"ADD_FONTS":case"DELETE_FONTS":{const r=t.payload;return r?{...e,...r}:e}case d.MF.IMPORT_STORY:case d.MF.IMPORT_TEMPLATE:case d.MF.IMPORT_KIT:case"ADD_BLOCK":case"ADD_GLOBAL_BLOCK":case"ADD_GLOBAL_POPUP":{const{fonts:r}=t.payload;return r&&0!==r.length?(0,h.Uy)(e,(e=>{r.forEach((({type:t,fonts:r})=>{e[t]=e[t]||{data:[]},e[t].data.push(...r)}))})):e}default:return e}},globalBlocks:(e={},t,r)=>{switch(t.type){case"HYDRATE":{const{globalBlocks:e,page:{data:{items:r=[]}},config:s}=t.payload,o=r.filter((e=>e?.value?.globalBlockId)).map((e=>e?.value?.globalBlockId));return Object.entries(e).reduce(((e,[r,a])=>{const n=(0,h.Uy)(a,(e=>{e.data.editorVersion=s.editorVersion}));return o.includes(r)&&!(0,y.CO)(a.data)?e[r]=(0,h.Uy)(n,(e=>{e.rules=(0,y.$f)(a,!0,t.payload.page,s).rules,e.data.value._id=r})):e[r]=n,e}),{})}case"ADD_BLOCK":return e;case"ADD_GLOBAL_BLOCK":{const{_id:s}=t.payload.block.value;return{...e,[s]:(0,y.$f)(e[s],!0,r?.page,t.payload.config)}}case"MAKE_POPUP_TO_GLOBAL_POPUP":case"MAKE_BLOCK_TO_GLOBAL_BLOCK":{const{uid:r,data:s,status:o,meta:a,rules:n,dataVersion:c,position:l,dependencies:i}=t.payload.block;return(0,h.Uy)(e,(e=>({[s.value._id]:{uid:r,dataVersion:c,meta:a,data:s,status:o,rules:n,position:l,dependencies:i},...e})))}case"UPDATE_GLOBAL_BLOCK":{const{uid:s,data:o,config:a}=t.payload;if(null===o.value&&!(0,y.CO)(e[s].data)){const t=(0,y.$f)(e[s],!1,r?.page,a);return{...e,[s]:t}}return e}case d.MF.UPDATE_GLOBAL_BLOCK_METADATA:{const{uid:r,title:s="",tags:o=""}=t.payload;return(0,h.Uy)(e,(e=>{s.length>0&&(e[r].title=s),e[r].tags=o}))}case d.MF.REMOVE_BLOCK:{const{index:s,config:o}=t.payload,a=(0,c._E)(r),n=Object.keys(e),l=a[s];if(n.includes(a[s])&&!(0,y.CO)(e[l].data)){const t=(0,y.$f)(e[l],!1,r?.page,o);return{...e,[l]:t}}return e}case"MAKE_GLOBAL_BLOCK_TO_BLOCK":{const{fromBlockId:s,config:o}=t.payload,a=(0,y.$f)(e[s],!1,r?.page,o);return{...e,[s]:a}}case"REORDER_BLOCKS":{const{oldIndex:s,newIndex:o,config:a}=t.payload,n=(0,c._E)(r),l=Object.keys(e);if(l.includes(n[s])){const t=n[s],i=(0,g.$T)((0,g.D3)(n,s),o,t),d=n[s],u=(0,y.Fp)(n,s,l),p=(0,y.Fp)(i,o,l);if("center"===u&&("top"===p||"bottom"===p)&&!(0,y.Hs)({pageBlocksIds:(0,c.I8)(r),globalBlocks:e,page:r?.page,config:a}).includes(d)){const t=(0,y.$f)(e[d],!0,r?.page,a);return{...e,[d]:t}}}return e}case d.MF.REMOVE_BLOCKS:{const{config:s}=t.payload,o=(0,c._E)(r),a=Object.keys(e),n=(0,M.j)(o,a);return(0,h.Uy)(e,(e=>{n.forEach((t=>{(0,y.CO)(e[t].data)||(e[t]=(0,y.$f)(e[t],!1,r?.page,s))}))}))}case"UPDATE_BLOCKS":{const{blocks:s,config:o}=t.payload,a=(0,c._E)(r),n=s.map((e=>e.value._id)),l=(0,k.e)(a,n);return(0,h.Uy)(e,(e=>{l.forEach((t=>{e[t]&&!(0,y.CO)(e[t].data)&&(e[t]=(0,y.$f)(e[t],!1,r?.page,o))}))}))}case"UPDATE_GB_RULES":{const{id:r,rules:s}=t.payload;return(0,h.Uy)(e,(e=>{e[r].rules=s}))}case n:{const{id:r}=t.payload;return(0,h.Uy)(e,(e=>{delete e[r]}))}case"PUBLISH":{const e=(0,c.KK)(r),s=(0,c.q_)(r,t.payload.config),o=(0,c.gP)(r).reduce(((t,r)=>({...t,[r]:e[r]})),{}),a=(0,c.$E)(r,t.payload.config);return Object.entries(e).reduce(((t,[r,n])=>(t[r]=(0,h.Uy)(n,(t=>{const c="SectionPopup"===n.data.type||"SectionPopup2"===n.data.type;t.dependencies=(0,O.w)(t.data,e).filter((e=>"GlobalBlock"===e.type)).map((e=>e.value._id)),c||(t.position=a[r]||null),(s[r]||o[r]||c)&&(t.status="publish")})),t)),{})}default:return e}},changedGBIds:(e=[],t,r)=>{switch(t.type){case"ADD_GLOBAL_BLOCK":case"ADD_GLOBAL_POPUP":return[...e,t.payload.block.value._id];case"MAKE_POPUP_TO_GLOBAL_POPUP":case"MAKE_BLOCK_TO_GLOBAL_BLOCK":return[...e,t.payload.block.data.value._id];case"MAKE_GLOBAL_POPUP_TO_POPUP":case"MAKE_GLOBAL_BLOCK_TO_BLOCK":{const{fromBlockId:r}=t.payload;return e.includes(r)?e:[...e,r]}case d.MF.REMOVE_BLOCK:{const{id:s}=t.payload;return(0,c.AV)(r)[s]&&!e.includes(s)?[...e,s]:e}case d.MF.REMOVE_BLOCKS:{const s=(0,c.q_)(r,t.payload.config),o=Object.keys(s),a=e;for(let t=0;t<o.length;t++){const r=o[t];e.includes(r)||a.push(r)}return a}case"UPDATE_GLOBAL_BLOCK":case d.MF.UPDATE_GLOBAL_BLOCK_METADATA:{const{uid:r}=t.payload;return e.includes(r)?e:[...e,r]}case"FETCH_PAGE_SUCCESS":return[];default:return e}},page:(e,t,r)=>{switch(t.type){case"HYDRATE":{const{page:e,config:r}=t.payload;return(0,h.Uy)(e,(e=>{e.data.editorVersion=r.editorVersion}))}case"PUBLISH":{const{status:s,editorMode:a}=t.payload;if((0,c.Df)(r)!==u.w.changed&&s===e.status)return e;const n=(0,o.CO)(a)?(0,c.h$)(r):(0,c.sA)(r),l=[...(0,c.Nw)(r).map((e=>e.value._id)),...(0,c.e8)(r)];return(0,h.Uy)(n,(e=>{e.status=s,e.dependencies=l,e.dataVersion=e.dataVersion+1}))}case"UPDATE_TRIGGERS":{const{data:r}=t.payload;return(0,h.Uy)(e,(e=>{e.data.triggers=r,e.dataVersion=e.dataVersion+1}))}case"UPDATE_POPUP_RULES":return(0,h.Uy)(e,(e=>{e.data.rulesAmount=t.payload.rules.length,e.dataVersion=e.dataVersion+1}));case"UPDATE_PAGE_LAYOUT":{const{layout:r,config:s}=t.payload;return(0,B.wr)(e,s)?(0,h.Uy)(e,(e=>{e.layout.value=r,e.dataVersion=e.dataVersion+1})):e}case"UPDATE_PAGE_TITLE":{const{title:r,config:s}=t.payload;return(0,B.wr)(e,s)?(0,h.Uy)(e,(e=>{e.title=r,e.dataVersion=e.dataVersion+1})):e}case"UPDATE_PAGE_IS_HOME_PAGE":{const{isHomePage:r,config:s}=t.payload;return(0,B.wr)(e,s)?(0,h.Uy)(e,(e=>{e.layout.isHomePage=r,e.dataVersion=e.dataVersion+1})):e}default:return e}},blocksOrder:(e=[],t)=>{switch(t.type){case"HYDRATE":{const e=t.payload.page.data?.items||[],{page:r,globalBlocks:s,config:o}=t.payload;if((0,E.zK)(o)&&0===e.length)return["ecupxjcqmrpxjdimoebbkbnotrlufkfokjvr"];const a=e.map((e=>e.value.globalBlockId||e.value._id));return(0,y.ey)({pageBlocksIds:a,page:r,globalBlocks:s,config:o})}case"ADD_GLOBAL_POPUP":case"ADD_GLOBAL_BLOCK":case"ADD_BLOCK":{const{block:r}=t.payload,{insertIndex:s}=t.meta,{_id:o}=r.value;return e.includes(o)?e:(0,g.$T)(e,s,r.value._id)}case d.MF.REMOVE_BLOCK:{const{index:r}=t.payload;return(0,g.D3)(e,r)}case d.MF.REMOVE_BLOCKS:return[];case"MAKE_GLOBAL_POPUP_TO_POPUP":{const{block:r,fromBlockId:s,type:o}=t.payload;return"external"==o?(0,g.Rc)(e,e.findIndex((e=>e===s)),r.value._id):e}case"MAKE_POPUP_TO_GLOBAL_POPUP":{const{block:r,fromBlockId:s,type:o}=t.payload;return"external"===o?(0,g.Rc)(e,e.findIndex((e=>e===s)),r.data.value._id):e}case"MAKE_BLOCK_TO_GLOBAL_BLOCK":{const{block:r,fromBlockId:s}=t.payload;return(0,g.Rc)(e,e.findIndex((e=>e===s)),r.data.value._id)}case"MAKE_GLOBAL_BLOCK_TO_BLOCK":{const{block:r,fromBlockId:s}=t.payload;return(0,g.Rc)(e,e.findIndex((e=>e===s)),r.value._id)}case"REORDER_BLOCKS":{const{oldIndex:r,newIndex:s}=t.payload,o=e[r];return(0,g.$T)((0,g.D3)(e,r),s,o)}case d.MF.IMPORT_TEMPLATE:{const{blocks:r}=t.payload,{insertIndex:s}=t.meta,o=r.map((e=>e.value._id));return(0,g.$T)(e,s,o)}case"UPDATE_BLOCKS":{const{blocks:e}=t.payload;return e.map((e=>e.value._id))}case"UPDATE_GLOBAL_BLOCK":{const{uid:r,data:s}=t.payload;return null===s.value?e.filter((e=>e!==r)):e}case n:{const{id:r}=t.payload;return e.filter((e=>e!==r))}default:return e}},project:(e,t,r)=>{switch(t.type){case"HYDRATE":{const{project:e,config:r}=t.payload;return(0,h.Uy)(e,(e=>{e.data.editorVersion=r.editorVersion}))}case"PUBLISH":{const{type:s}=t.payload,o=(0,c.g6)(r);return"externalForce"===s?(0,h.Uy)(o,(e=>{e.dataVersion=e.dataVersion+1})):(0,U.X)(e,o)?e:(0,h.Uy)(o,(e=>{e.dataVersion=e.dataVersion+1}))}case"UPDATE_DISABLED_ELEMENTS":{const r=t.payload;return(0,h.Uy)(e,(e=>{e.data.disabledElements=r,e.dataVersion=e.dataVersion+1}))}case d.MF.UPDATE_PINNED_ELEMENTS:{const r=t.payload;return(0,h.Uy)(e,(e=>{e.data.pinnedElements=r,e.dataVersion=e.dataVersion+1}))}case d.MF.IMPORT_KIT:{const{selectedKit:r}=t.payload;return(0,h.Uy)(e,(e=>{e.data.selectedKit=r,e.dataVersion=e.dataVersion+1}))}case"UPDATE_CURRENT_KIT_ID":{const r=t.payload;return(0,h.Uy)(e,(e=>{e.data.selectedKit=r,e.dataVersion=e.dataVersion+1}))}case d.MF.IMPORT_STORY:case d.MF.IMPORT_TEMPLATE:{const{styles:r,fonts:s}=t.payload;return r?.length||s?.length?(0,h.Uy)(e,(e=>{e.dataVersion=e.dataVersion+1})):e}case"ADD_FONTS":case"DELETE_FONTS":return(0,h.Uy)(e,(e=>{e.dataVersion=e.dataVersion+1}));case"UPDATE_DEFAULT_FONT":{const r=t.payload;return(0,h.Uy)(e,(e=>{e.data.font=r,e.dataVersion=e.dataVersion+1}))}default:return e}},styles:(e=[],t)=>{switch(t.type){case a:{const{project:e}=t.payload;return e.data.styles}case d.MF.IMPORT_STORY:case d.MF.IMPORT_TEMPLATE:case d.MF.IMPORT_KIT:{const{styles:r}=t.payload;return r?e.find((e=>e.id===r[0].id))?e:[...r,...e]:e}case d.MF.UPDATE_CURRENT_STYLE:return(0,h.Uy)(e,(e=>{for(let r=0;r<e.length;r++)e[r].id===t.payload.id&&(e[r]=t.payload)}));case d.MF.REGENERATE_TYPOGRAPHY:case d.MF.REGENERATE_COLORS:return P(e)?e.map((e=>e.title===T&&e.id==A?t.payload:e)):[...e,t.payload];default:return e}},currentStyleId:(e="",t,r)=>{switch(t.type){case"HYDRATE":{const{project:e}=t.payload;return e.data.selectedStyle}case d.MF.UPDATE_CURRENT_STYLE_ID:return t.payload;case d.MF.ADD_NEW_GLOBAL_STYLE:return t.payload.id;case d.MF.REMOVE_GLOBAL_STYLE:return r.styles[0].id;case d.MF.IMPORT_STORY:case d.MF.IMPORT_TEMPLATE:{const{currentStyleId:r}=t.payload;return r||e}case d.MF.REGENERATE_COLORS:case d.MF.REGENERATE_TYPOGRAPHY:{const e=P(r.styles);return e?e.id:t.payload.id}default:return e}},currentStyle:(e,t,r)=>{switch(t.type){case"HYDRATE":{const{project:e}=t.payload,r=[...e.data.styles,...e.data.extraStyles??[]];return r.find((t=>t.id===e.data.selectedStyle))??r[0]}case d.MF.UPDATE_CURRENT_STYLE:return t.payload;case d.MF.UPDATE_CURRENT_STYLE_ID:{const e=t.payload,s=[...r.styles,...r.extraStyles??[]];return s.find((({id:t})=>t===e))??s[0]}case d.MF.ADD_NEW_GLOBAL_STYLE:return t.payload;case d.MF.REMOVE_GLOBAL_STYLE:return r.styles[0];case d.MF.IMPORT_STORY:case d.MF.IMPORT_TEMPLATE:{const{currentStyleId:s,styles:o}=t.payload,a=[...o??[],...r.styles,...r.extraStyles];return(s?a.find((e=>e.id===s)):e)??e}case d.MF.EDIT_GLOBAL_STYLE_NAME:return{...e,title:t.payload};case d.MF.REGENERATE_TYPOGRAPHY:case d.MF.REGENERATE_COLORS:return t.payload;default:return e}},ui:function(e=C,t){if("UPDATE_UI"===t.type){const{key:r,value:s}=t,o={...e,[r]:s};return"deviceMode"===r&&"manual"!==o.rightSidebar.lock&&("desktop"!==s?o.rightSidebar={...o.rightSidebar,isOpen:!0,lock:"auto"}:o.rightSidebar.isOpen&&(o.rightSidebar={...o.rightSidebar,isOpen:!1,lock:void 0})),o}return e},storeWasChanged:(e,t)=>{switch(t.type){case"HYDRATE":return u.w.unchanged;case"FETCH_PAGE_SUCCESS":return e===u.w.pending?u.w.unchanged:e;case"ADD_BLOCK":case d.MF.REMOVE_BLOCK:case d.MF.REMOVE_BLOCKS:case"REORDER_BLOCKS":case"UPDATE_BLOCKS":case"UPDATE_GLOBAL_BLOCK":case d.MF.UPDATE_GLOBAL_BLOCK_METADATA:case"MAKE_BLOCK_TO_GLOBAL_BLOCK":case"MAKE_POPUP_TO_GLOBAL_POPUP":case"MAKE_GLOBAL_POPUP_TO_POPUP":case"MAKE_GLOBAL_BLOCK_TO_BLOCK":case"ADD_GLOBAL_BLOCK":case"ADD_GLOBAL_POPUP":case d.MF.UPDATE_CURRENT_STYLE_ID:case d.MF.UPDATE_CURRENT_STYLE:case d.MF.REGENERATE_TYPOGRAPHY:case d.MF.REGENERATE_COLORS:case"UPDATE_EXTRA_FONT_STYLES":case d.MF.IMPORT_TEMPLATE:case d.MF.IMPORT_STORY:case"UNDO":case"REDO":case d.MF.CREATE_SYMBOL:case d.MF.UPDATE_SYMBOL:case d.MF.DELETE_SYMBOL:return u.w.changed;case"PUBLISH":return u.w.pending;case"STORE_WAS_CHANGED":return t.payload;case d.MF.UPDATE_ERROR:return u.w.unchanged;default:return e}},extraStyles:(e=[],t,r)=>{switch(t.type){case"HYDRATE":{const{project:e}=t.payload;return e.data.extraStyles}case d.MF.UPDATE_CURRENT_STYLE:{const s=r.currentStyleId;return(0,h.Uy)(e,(e=>{const r=e.findIndex((e=>e.id===s));-1!==r&&(e[r]=t.payload)}))}case d.MF.ADD_NEW_GLOBAL_STYLE:return[...e,t.payload];case d.MF.REMOVE_GLOBAL_STYLE:return e.filter((e=>e.id!==t.payload));case d.MF.EDIT_GLOBAL_STYLE_NAME:{const s=r.currentStyleId;return(0,h.Uy)(e,(e=>{const r=e.findIndex((e=>e.id===s));-1!==r&&(e[r].title=t.payload)}))}default:return e}},blocksHtml:(e=z,t,r)=>{switch(t.type){case"HYDRATE":{const{page:r,globalBlocks:s,config:o}=t.payload,a=Object.values(s).map((e=>e.blocks||[])).flat(),n=(e=>e.reduce(((e,t)=>(e[t.id]={html:t.html},e)),{}))([...r.blocks||[],...a]),c=r.data?.items||[],l=c.map((e=>e.value.globalBlockId||e.value._id)),i=(0,y.ey)({pageBlocksIds:l,page:r,globalBlocks:s,config:o});let d=i.reduce(((e,t)=>{const r=n[t];return r&&(e[t]=r),e}),{});const u=i.map((e=>s[e]||c.find((t=>t.value._id===e))));return(0,O.w)({value:u},s).forEach((e=>{const t=e.value._id,r=n[t];r&&(d={...d,[t]:r})})),(0,h.Uy)(e,(e=>{e.blocks=d}))}case d.MF.REMOVE_BLOCKS:return z;case"UNDO":case"REDO":case d.MF.IMPORT_TEMPLATE:case"UPDATE_BLOCKS":case"ADD_BLOCK":case"ADD_GLOBAL_BLOCK":case"ADD_GLOBAL_POPUP":case"UPDATE_GLOBAL_BLOCK":return e.inPending?e:(0,h.Uy)(e,(e=>{e.inPending=!0}));case d.MF.UPDATE_BLOCK_HTML:{const{blockId:r,data:s}=t.payload;return(0,h.Uy)(e,(e=>{e.blocks[r]=s}))}case d.MF.UPDATE_BLOCKS_HTML:{const{blocks:r}=t.payload;return(0,h.Uy)(e,(e=>{r.forEach((({id:t,block:r})=>{e.blocks[t]=r}))}))}case d.MF.REMOVE_BLOCK:{const{index:s}=t.payload,o=(0,c.KK)(r),a=Object.keys(o),n=(0,c._E)(r)[s];return a.includes(n)?e:(0,h.Uy)(e,(e=>{delete e.blocks[n]}))}case d.MF.UPDATE_BLOCK_HTML_STATS:{const{stats:r}=t.payload;return(0,h.Uy)(e,(e=>{e.inProcessing=r,e.initialized||(e.initialized=!0),0===r&&(e.inPending=!1),r>0&&!e.inPending&&(e.inPending=!0)}))}case d.MF.INITIALIZE_BLOCKS_HTML:return(0,h.Uy)(e,(e=>{e.initialized=!0}));case"FETCH_PAGE_SUCCESS":return(0,h.Uy)(e,(e=>{e.blocks=Object.keys(e.blocks).reduce(((e,t)=>(e[t]={html:""},e)),{})}));case n:{const{id:r}=t.payload;return(0,h.Uy)(e,(e=>{delete e.blocks[r]}))}default:return e}},symbols:(e,t)=>{switch(t.type){case a:{const{symbols:e}=t.payload;return{element:void 0,classes:e??[]}}case d.MF.CREATE_SYMBOL:{const{element:r,cssClasses:s}=t.payload;return(0,h.Uy)(e,(e=>{e.element=r,e.classes.push(...s)}))}case d.MF.UPDATE_SYMBOL:{const{element:r,cssClass:s}=t.payload;return(0,h.Uy)(e,(e=>{e.element=r,e.classes=e.classes.map((e=>e.uid===s.uid?s:e))}))}case d.MF.DELETE_SYMBOL:{const r=t.payload.filter(Boolean);return(0,h.Uy)(e,(e=>{e.classes=e.classes.filter((e=>!r.includes(e.uid)))}))}default:return e}},symbolsCSS:(e,t)=>{switch(t.type){case d.MF.UPDDATE_SYMBOLS_CSS:return t.payload;case d.ab:return{};default:return e}}},x={screenshots:(e,t,r,s)=>{switch(t.type){case"HYDRATE":case"PUBLISH":{const e=D(s.page.data),t={};for(const[e,r]of Object.entries(s.globalBlocks)){const s=r.data;if(v(s)){const r=s.value;t[e]={_thumbnailSrc:r._thumbnailSrc,_thumbnailWidth:r._thumbnailWidth,_thumbnailHeight:r._thumbnailHeight,_thumbnailTime:r._thumbnailTime}}Object.assign(t,D(s.value))}return{...e,...t,_published:{...e,...t}}}case d.MF.UPDATE_SCREENSHOT:{const{payload:{blockId:r,data:s}}=t;return(0,h.Uy)(e,(e=>{e[r]=s}))}case"MAKE_POPUP_TO_GLOBAL_POPUP":case"MAKE_BLOCK_TO_GLOBAL_BLOCK":{const{data:{value:{_id:r}},meta:s}=t.payload.block,o=(e=>{if(void 0!==e._thumbnailSrc&&void 0!==e._thumbnailWidth&&void 0!==e._thumbnailHeight&&void 0!==e._thumbnailTime)return{_thumbnailSrc:e._thumbnailSrc,_thumbnailWidth:e._thumbnailWidth,_thumbnailHeight:e._thumbnailHeight,_thumbnailTime:e._thumbnailTime}})(s);return o?(0,h.Uy)(e,(e=>{e[r]=o,e._published[r]=o})):e}default:return e}}},(e={},t)=>{const r={};return Object.entries(I).reduce(((r,[s,o])=>(r[s]=o(e[s],t,e),r)),r),Object.entries(x).reduce(((r,[s,o])=>(r[s]=o(e[s],t,e,r),r)),r),r}),{keysToTrack:["blocksOrder","blocksData","currentStyleId","currentStyle","extraFontStyles","storeWasChanged","extraStyles","symbols"],onBeforeUpdate:(e,t,r)=>{if("UPDATE_GB_RULES"===t.type||t.type===d.MF.REMOVE_BLOCK||t.type===d.MF.REMOVE_BLOCKS){const s=(0,c._E)(e),o=(0,c.AV)(e);(t.type===d.MF.REMOVE_BLOCKS?s:[t.payload.id]).forEach((e=>{if(s.includes(e)&&o[e]){const t=r.getSnapshots();r.replaceSnapshots(t.map((t=>(t?.blocksOrder&&(t.blocksOrder=t.blocksOrder.filter((t=>t!==e))),t))))}}))}}});var I,x,F=r(54369),w=r(82796),j=r(27378),K=r(69562),G=r(96590),V=r(90818);class Y{instance;constructor(e){this.instance=Object.freeze(new V.yo(e))}getStyles(){return this.instance.getStyles()}purge(){this.instance.purge()}}var N=r(23884),H=r(18417),$=r(98015),q=r(31897),Z=r(38417),W=r(7279),J=r(85517),Q=r(88042),X=r(48645),ee=r(75581),te=r(73409);class re extends J.Z{static get componentId(){return Q.i.ThirdPartyItems}static defaultProps={meta:{},itemProps:{},sliceStartIndex:0,sliceEndIndex:1/0};getItemProps(e,t){const r={getItems:()=>[{id:"duplicate",type:"button",devices:"desktop",config:{icon:"nc-duplicate",title:(0,ee.t)("Duplicate"),reverseTheme:!0},position:200,onClick:()=>{this.cloneItem(t)}},{id:"remove",type:"button",devices:"desktop",config:{icon:"nc-trash",title:(0,ee.t)("Delete"),reverseTheme:!0},position:250,onClick:()=>{(0,W.iu)(),this.removeItem(t)}}]},s=this.makeToolbarPropsFromConfig2(r);return{meta:this.props.meta,toolbarExtend:s}}handleSortableAcceptElements=(e,t)=>{const{elementType:r,elementNode:s}=e,{acceptedElements:o=["column","shortcode","addable"]}=this.props;if(Array.isArray(o)){const e=-1!==o.indexOf(r),t=s.getAttribute((0,te.KY)("sortable-subtype")),a=-1!==o.indexOf(t);return e||a}return e.sortableNode===t.sortableNode};renderItemsContainer(e){const{className:t}=this.props;return(0,X.D1)(this.props.renderContext)?j.createElement("div",{className:t},e):0===e.length?j.createElement("div",{className:t},j.createElement(Z.Z,{path:this.getId(),type:"thirdPartyContainer",acceptElements:this.handleSortableAcceptElements})):j.createElement(q.Z,{path:this.getId(),type:"thirdPartyContainer",acceptElements:this.handleSortableAcceptElements},((r,s)=>j.createElement("div",{...s,ref:r,className:t},e)))}}const se=re;function oe(e){const{editorProps:t}=(()=>{const e=(0,j.useContext)($.x);if(!e)throw new Error("useThirdParty must be used within a ThirdPartyProvider");return e})(),{acceptedElements:r,className:s}=e;return j.createElement(se,{...t,acceptedElements:r,className:s})}var ae=r(73043);class ne extends j.Component{constructor(e){super(e),this.register(e.config),(0,ae.K)("getEditorElements",this.getEditorElements)}getEditorElements=()=>({Container:oe});register(e){const t=(0,H.ZP)(e);for(const e of Object.values(t))K.Z.registerComponent(e);K.Z.registerNotFoundComponent(H.w9);const r=e.thirdPartyComponents;r&&Object.values(r).forEach((e=>{K.Z.registerThirdPartyElement(e)}))}render(){return this.props.children}}var ce=r(54430),le=r(73109);const ie=e=>{const{children:t,pageId:r,groups:s}=e,{sheet:o}=(0,le.B)(),a=(0,j.useMemo)((()=>({sheet:o,dynamicContent:{itemId:r,config:s}})),[r,s,o]);return j.createElement(ce.d.Provider,{value:a},t)};var de=r(70618),ue=r(14966),pe=r(99588);function _e(e){const{sheet:t,store:r,config:s,children:a,editorMode:n}=e,c=pe.o.init({resources:{}}),l=s.pageData?.id??"";return j.createElement(ue.L,{sheet:t},j.createElement(de.a,{i18n:c},j.createElement(N.zt,{store:r},j.createElement(G.i,{config:s},j.createElement(ne,{config:s},j.createElement(X.QV,{renderType:"view"},j.createElement(o.cb,{mode:n},j.createElement(le.V,null,j.createElement(ie,{pageId:l},a)))))))))}var be=r(36935),me=r(37803),he=r(87498);const ge=JSON.parse('{"free":[{"name":"group-jq","path":"./editor/js/libs/common/jQuery","selectors":[".brz__group__jquery"]},{"name":"group-1","path":"./editor/js/libs/group-1","selectors":[".brz__group__jquery",".brz-forms",".brz-forms2",".brz-filters__main",".brz-translation"]},{"name":"group-1_2","path":"./editor/js/libs/group-1_2","selectors":[".brz__group__jquery",".brz-forms",".brz-forms2",".brz-filters__main",".brz-translation",".brz-slick-slider",".brz-carousel",".brz-countdown",".brz-countdown2",".brz-groupSlider"]},{"name":"group-1_3","path":"./editor/js/libs/group-1_3","selectors":[".brz__group__jquery",".brz-forms",".brz-forms2",".brz-filters__main",".brz-translation",".brz-animated",".brz-image__lightbox",".brz-image__gallery-lightbox",".brz-motion--effects",".brz-video__lightbox"]},{"name":"group-1_4","path":"./editor/js/libs/group-1_4","selectors":[".brz__group__jquery",".brz-forms",".brz-forms2",".brz-filters__main",".brz-translation",".brz-bg-slideshow"]},{"name":"group-1_5","path":"./editor/js/libs/group-1_5","selectors":[".brz__group__jquery",".brz-forms",".brz-forms2",".brz-filters__main",".brz-translation",".brz-forms2__calculated"]},{"name":"group-1_7","path":"./editor/js/libs/group-1_7","selectors":[".brz__group__jquery",".brz-forms",".brz-forms2",".brz-filters__main",".brz-translation",".brz-sermonLayout",".brz-sermonList",".brz-sermonDetail",".brz-sermonFeatured",".brz-articleDetail",".brz-articleList",".brz-articleFeatured"]},{"name":"group-2","path":"./editor/js/libs/group-2","selectors":[".brz__group__jquery",".brz-slick-slider",".brz-carousel",".brz-countdown",".brz-countdown2",".brz-groupSlider"]},{"name":"group-2_3","path":"./editor/js/libs/group-2_3","selectors":[".brz__group__jquery",".brz-slick-slider",".brz-carousel",".brz-countdown",".brz-countdown2",".brz-groupSlider",".brz-animated",".brz-image__lightbox",".brz-image__gallery-lightbox",".brz-motion--effects",".brz-video__lightbox"]},{"name":"group-2_4","path":"./editor/js/libs/group-2_4","selectors":[".brz__group__jquery",".brz-slick-slider",".brz-carousel",".brz-countdown",".brz-countdown2",".brz-groupSlider",".brz-bg-slideshow"]},{"name":"group-2_5","path":"./editor/js/libs/group-2_5","selectors":[".brz__group__jquery",".brz-slick-slider",".brz-carousel",".brz-countdown",".brz-countdown2",".brz-groupSlider",".brz-forms2__calculated"]},{"name":"group-2_7","path":"./editor/js/libs/group-2_7","selectors":[".brz__group__jquery",".brz-slick-slider",".brz-carousel",".brz-countdown",".brz-countdown2",".brz-groupSlider",".brz-sermonLayout",".brz-sermonList",".brz-sermonDetail",".brz-sermonFeatured",".brz-articleDetail",".brz-articleList",".brz-articleFeatured"]},{"name":"group-3","path":"./editor/js/libs/group-3","selectors":[".brz__group__jquery",".brz-animated",".brz-image__lightbox",".brz-image__gallery-lightbox",".brz-motion--effects",".brz-video__lightbox"]},{"name":"group-3_4","path":"./editor/js/libs/group-3_4","selectors":[".brz__group__jquery",".brz-animated",".brz-image__lightbox",".brz-image__gallery-lightbox",".brz-motion--effects",".brz-video__lightbox",".brz-bg-slideshow"]},{"name":"group-3_5","path":"./editor/js/libs/group-3_5","selectors":[".brz__group__jquery",".brz-animated",".brz-image__lightbox",".brz-image__gallery-lightbox",".brz-motion--effects",".brz-video__lightbox",".brz-forms2__calculated"]},{"name":"group-3_7","path":"./editor/js/libs/group-3_7","selectors":[".brz__group__jquery",".brz-animated",".brz-image__lightbox",".brz-image__gallery-lightbox",".brz-motion--effects",".brz-video__lightbox",".brz-sermonLayout",".brz-sermonList",".brz-sermonDetail",".brz-sermonFeatured",".brz-articleDetail",".brz-articleList",".brz-articleFeatured"]},{"name":"group-4","path":"./editor/js/libs/group-4","selectors":[".brz-bg-slideshow"]},{"name":"group-4_5","path":"./editor/js/libs/group-4_5","selectors":[".brz-bg-slideshow",".brz-forms2__calculated"]},{"name":"group-4_7","path":"./editor/js/libs/group-4_7","selectors":[".brz-bg-slideshow",".brz-sermonLayout",".brz-sermonList",".brz-sermonDetail",".brz-sermonFeatured",".brz-articleDetail",".brz-articleList",".brz-articleFeatured"]},{"name":"group-5","path":"./editor/js/libs/group-5","selectors":[".brz-forms2__calculated"]},{"name":"group-5_7","path":"./editor/js/libs/group-5_7","selectors":[".brz-forms2__calculated",".brz-sermonLayout",".brz-sermonList",".brz-sermonDetail",".brz-sermonFeatured",".brz-articleDetail",".brz-articleList",".brz-articleFeatured"]},{"name":"group-7","path":"./editor/js/libs/group-7","selectors":[".brz-sermonLayout",".brz-sermonList",".brz-sermonDetail",".brz-sermonFeatured",".brz-articleDetail",".brz-articleList",".brz-articleFeatured"]},{"name":"group-all","path":"./editor/js/libs/group-all","selectors":[".brz__group__jquery",".brz-forms",".brz-forms2",".brz-filters__main",".brz-translation",".brz-slick-slider",".brz-carousel",".brz-countdown",".brz-countdown2",".brz-groupSlider",".brz-animated",".brz-image__lightbox",".brz-image__gallery-lightbox",".brz-motion--effects",".brz-video__lightbox",".brz-bg-slideshow",".brz-forms2__calculated",".brz-sermonLayout",".brz-sermonList",".brz-sermonDetail",".brz-sermonFeatured",".brz-articleDetail",".brz-articleList",".brz-articleFeatured"]}],"pro":[{"name":"group-1","path":"./editor/js/libs/group-1-pro","selectors":[".brz-image__gallery",".brz-posts--masonry"]},{"name":"group-1_2","path":"./editor/js/libs/group-1_2-pro","selectors":[".brz-image__gallery",".brz-posts--masonry",".brz-menu__mmenu",".brz-mega-menu__portal",".brz-menu__sub-menu",".brz-menu__preview",".brz-tooltip","[data-tooltip]","[data-brz-tooltip]"]},{"name":"group-1_3","path":"./editor/js/libs/group-1_3-pro","selectors":[".brz-image__gallery",".brz-posts--masonry",".brz-lottie"]},{"name":"group-1_4","path":"./editor/js/libs/group-1_4-pro","selectors":[".brz-image__gallery",".brz-posts--masonry",".brz-chart"]},{"name":"group-2","path":"./editor/js/libs/group-2-pro","selectors":[".brz-menu__mmenu",".brz-mega-menu__portal",".brz-menu__sub-menu",".brz-menu__preview",".brz-tooltip","[data-tooltip]","[data-brz-tooltip]"]},{"name":"group-2_3","path":"./editor/js/libs/group-2_3-pro","selectors":[".brz-menu__mmenu",".brz-mega-menu__portal",".brz-menu__sub-menu",".brz-menu__preview",".brz-tooltip","[data-tooltip]","[data-brz-tooltip]",".brz-lottie"]},{"name":"group-2_4","path":"./editor/js/libs/group-2_4-pro","selectors":[".brz-menu__mmenu",".brz-mega-menu__portal",".brz-menu__sub-menu",".brz-menu__preview",".brz-tooltip","[data-tooltip]","[data-brz-tooltip]",".brz-chart"]},{"name":"group-3","path":"./editor/js/libs/group-3-pro","selectors":[".brz-lottie"]},{"name":"group-3_4","path":"./editor/js/libs/group-3_4-pro","selectors":[".brz-lottie",".brz-chart"]},{"name":"group-4","path":"./editor/js/libs/group-4-pro","selectors":[".brz-chart"]},{"name":"group-all","path":"./editor/js/libs/group-all-pro","selectors":[".brz-image__gallery",".brz-posts--masonry",".brz-menu__mmenu",".brz-mega-menu__portal",".brz-menu__sub-menu",".brz-menu__preview",".brz-tooltip","[data-tooltip]","[data-brz-tooltip]",".brz-lottie",".brz-chart"]}]}');var ye=r(66706),Ee=r(48554),fe=r(29770),Oe=r(81629);const ze=e=>{const t=e.urls?.prefetchFonts,r=['<link class="brz-link brz-link-bunny-fonts-prefetch" rel="dns-prefetch" href="//fonts.bunny.net">','<link class="brz-link brz-link-bunny-fonts-preconnect" rel="preconnect" href="https://fonts.bunny.net/" crossorigin>'];return t&&r.push(`<link class="brz-link brz-link-cdn-preconnect" rel="preconnect" href="${t}" crossorigin>`),r};var Le=r(81118);const Te=e=>{let t="";return e((0,te.uC)({name:"custom-css"})).each((function(){const r=e(this),s=r.attr((0,te.KY)("custom-id"))||"";t+=r.attr((0,te.KY)("custom-css"));const o=r.children();o.attr((0,te.KY)("custom-id"),s),r.replaceWith(o)})),0===t.length?[]:[t]};var Ae=r(36975),Pe=r(3674);const Se=(e,t)=>{const r=[],s=e(".brz-rich-text");return s.find(".brz-tp__dc-block[data-color]").each((function(){const s=e(this),o=s.attr("data-color")||"",a=(0,Le.U$)(o),n=`dc-color-${(0,Pe.Vj)(5)}`;s.addClass(n),s.removeAttr("data-color");const c=Object.entries(a).reduce(((e,[r,s])=>{const o=`.${n} ${r}`,a=(0,Ae.vm)(o,s,t);return a&&e.push(a),e}),[]).join("");r.push(c)})),s.find("[data-color]").each((function(){e(this).removeAttr("data-color")})),0===r.length?[]:r},Me=e=>`https://use.typekit.net/${e}.css`,ke=e=>!0!==e.deleted,Be=({google:e,upload:t,extra:r,config:s})=>{const{adobeKitId:o}=r??{},a=e.filter(ke),n=t.filter(ke),c=a.length?`https://fonts.bunny.net/css?family=${a.reduce(((e,t)=>{const r=t.family.replace(/\s/g,"+"),s=t.variants.join();return""===e?`${r}:${s}`:`${e}|${r}:${s}`}),"")}&subset=arabic,bengali,cyrillic,cyrillic-ext,devanagari,greek,greek-ext,gujarati,hebrew,khmer,korean,latin-ext,tamil,telugu,thai,vietnamese&display=swap`:void 0,l=n.length?((e,t)=>{const r=t.urls?.editorFonts;return`${r}${e.reduce(((e,{id:t,weights:r})=>{const s=r.join();return""===e?`${t}:${s}`:`${e}|${t}:${s}`}),"")}`})(n,s):void 0;return{google:c,upload:l,...o?{adobe:Me(o)}:{}}},Ue=(e,t)=>(0,Oe.P)(t)?e:{...e,rel:"stylesheet"},ve=e=>e.replace(/&(quot|#x27|amp|gt);/g,(e=>{switch(e){case"&quot;":return'"';case"&#x27;":return"'";case"&amp;":return"&";case"&gt;":return">"}return""})),De=e=>{const{free:t,pro:r}=(e=>{const{$root:t,fonts:r,css:s,config:o,extra:a}=e,{free:n=[],pro:c=[]}=ge,l={name:"main",score:fe.ph,content:{type:"file",url:(0,ye.i)("editor/css/preview.min.css",o),attr:Ue({class:"brz-link brz-link-preview"},o)},pro:!1},i=[],d=(e=>{const{fonts:t,extra:r,config:s}=e,{google:o,upload:a,adobe:n}=Be({...t,extra:r,config:s}),c=[];return n&&c.push({name:"adobe",type:"adobe-font",score:fe.Rb,content:{type:"file",url:n,attr:Ue({class:"brz-link brz-link-adobe",type:"text/css"},s)},pro:!0}),o&&c.push({name:"google",type:"google-font",score:fe.Rb,content:{type:"file",url:o,attr:Ue({class:"brz-link brz-link-google",type:"text/css"},s)},pro:!1}),a&&c.push({name:"upload",type:"uploaded-font",score:fe.Rb,content:{type:"file",url:a,attr:Ue({class:"brz-link brz-link-upload",type:"text/css"},s)},pro:!1}),c})({fonts:r,extra:a,config:o}),u=((e,t)=>{const r=Be({...e,config:t})?.google;return r?[{name:"projectPrefetchFonts",score:fe.Rb,content:{type:"code",content:ze(t).join(" ")},pro:!1}]:[]})(r,o),p={name:"metaViewport",score:fe.Rb,content:{type:"code",content:'<meta name="viewport" content="width=device-width, initial-scale=1">'},pro:!1};i.push(p);const _=Te(t).map(((e,t)=>({name:(0,Le.JU)(e),score:fe.qI,content:{type:"inline",content:ve(e),attr:{id:`brz-custom-css-${t}`,class:"brz-style"}},pro:!1})));i.push(..._);const b=((e,t)=>Se(e,t).map(((e,t)=>({name:(0,Le.JU)(e),score:fe.VS,content:{type:"inline",content:e,attr:{id:`brz-dc-color-${t}`,class:"brz-style"}},pro:!1}))))(t,o);i.push(...b);const m=(e=>{const t=[],{default:r,rules:s,custom:o}=e;for(const e of r)t.push({name:(0,Le.JU)(e.cssText),score:fe.ER,content:{type:"inline",content:e.cssText,attr:{class:"brz-style"}},pro:!1});for(const e of s)t.push({name:(0,Le.JU)(e.cssText),score:fe.Pv,content:{type:"inline",content:e.cssText,attr:{class:"brz-style"}},pro:!1});for(const e of o)t.push({name:(0,Le.JU)(e.cssText),score:fe.po,content:{type:"inline",content:e.cssText,attr:{class:"brz-style"}},pro:!1});return t})(s);i.push(...m),(o.thirdPartyUrls??[]).forEach((({styleUrl:e})=>{e&&i.push({name:`third-party-${(0,Le.JU)(e)}`,score:fe.cH,pro:!1,content:{type:"file",url:e}})}));const h=[],g=new Set;n.forEach((e=>{const{name:r,selectors:s}=e;h.push({name:r,selectors:s,score:fe.e5,content:{type:"file",url:(0,ye.i)(`editor/css/${r}.min.css`,o),attr:Ue({class:"brz-link brz-link-preview-lib",...(0,te.Av)({name:"group",value:r})},o)},pro:!1}),s.forEach((e=>{t(e).length&&g.add(e)}))}));const y={free:{main:l,pageFonts:d,pageStyles:u,generic:i,libsMap:h,libsSelectors:[...g]}},E=o.pro;if(E){const e=[],r=new Set,s=[],a={name:"main",score:fe.ph,content:{type:"file",url:(0,Ee.J)(E,"css/preview.pro.min.css"),attr:Ue({class:"brz-link brz-link-preview-pro"},o)},pro:!0};c.forEach((e=>{const{name:a,selectors:n}=e;s.push({name:a,selectors:n,score:fe.e5+1,content:{type:"file",url:(0,Ee.J)(E,`css/${a}-pro.min.css`),attr:Ue({class:"brz-link brz-link-preview-lib-pro",...(0,te.Av)({name:"group",value:a})},o)},pro:!0}),n.forEach((e=>{t(e).length&&r.add(e)}))})),y.pro={main:a,generic:e,libsMap:s,libsSelectors:[...r]}}return y})(e),{free:s,pro:o}=((e,t)=>{const{free:r=[],pro:s=[]}=ge,o=new Set,a=[],{editorVersion:n,pro:c}=t,l={name:"main",score:fe.ph,content:{type:"file",url:(0,ye.i)("editor/js/preview.min.js",t),attr:{class:"brz-script brz-script-preview",defer:"true"}},pro:!1};r.forEach((r=>{const{name:s,selectors:n}=r;a.push({name:s,selectors:n,score:fe.e5,content:{type:"file",url:(0,ye.i)(`editor/js/${s}.min.js`,t),attr:{class:"brz-script brz-script-preview-lib",defer:"true",...(0,te.Av)({name:"group",value:s})}},pro:!1}),n.forEach((t=>{e(t).length&&o.add(t)}))})),0===o.size&&o.add(".brz__group__jquery");const i={free:{main:l,version:n,generic:[],libsMap:a,libsSelectors:[...o]}};if(c){const t=[],r=new Set,o=[],a={name:"main",score:fe.ph,content:{type:"file",url:(0,Ee.J)(c,"js/preview.pro.min.js"),attr:{class:"brz-script brz-script-preview-pro",defer:"true"}},pro:!0};s.forEach((t=>{const{name:s,selectors:a}=t;o.push({name:s,selectors:a,score:fe.e5+1,content:{type:"file",url:(0,Ee.J)(c,`js/${s}.pro.min.js`),attr:{class:"brz-script brz-script-preview-lib-pro",defer:"true",...(0,te.Av)({name:"group",value:s})}},pro:!0}),a.forEach((t=>{e(t).length&&r.add(t)}))})),i.pro={main:a,version:c.version??"",generic:t,libsMap:o,libsSelectors:[...r]}}return i})(e.$root,e.config);return{freeStyles:t,freeScripts:s,...r&&{proStyles:r},...o&&{proScripts:o}}},Ce=e=>{e((0,te.uC)({name:"mmenu-id"})).each((function(){const t=(0,Pe.Vj)(),r=e(this),s=r.children(".brz-menu__mmenu");r.attr((0,te.KY)("mmenu-id"),`#${t}`),s&&s.attr("id",t)}))};var Re=r(53738);const Ie=/data-brz-(.+)-/,xe=["data-brz-onclick-event","data-brz-onsubmit-event"],Fe=e=>{const t=xe.map((e=>`[${e}]`)).join(",");e(t).each((function(){const t=e(this),r=Object.entries(t.attr()).filter((e=>{const[t]=e;return(0,Re.fh)(t)}));for(let e=0;e<r.length;e++){const[s,o]=r[e],a=Ie.exec(s);if(a)try{const[e,r]=a;t.attr(r,o),t.removeAttr(s)}catch(e){}}}))};var we=r(57270);const je=e=>{const{store:t,sheet:r,config:s,Page:o}=e,a=t.getState(),n=(0,c.ky)(a);(0,he.yd)();const l=me.renderToStaticMarkup(o),i=r.getCSSOrdered(),d=(e=>e.map((e=>({name:"symbol",score:fe.Gu,content:{type:"inline",content:e.cssText},attr:{class:e.className}}))))(i.symbol),u=be.ZP.load(`<html>\n      <head></head>\n      <body>${l}</body>\n    </html>`,{decodeEntities:!1});Ce(u),Fe(u);const p=(e=>{const{fonts:t,parsedFonts:r,defaultFont:s,projectDefaultFontId:o}=e,{upload:a=[],google:n=[],system:c=[],adobe:l=[]}=(0,we.Ag)(t);let i=!1;const{fonts:d}={fonts:{google:[],upload:[],adobe:[],system:[]}},u=t?.adobe?.id;if(r.forEach((({type:e,family:t})=>{switch(i||(i=o===t),e){case"adobe":{const e=(0,we.Ut)(l,t);e&&u&&d.adobe.push(e);break}case"system":{const e=(0,we.Ut)(c,t);e&&d.system.push(e);break}case"upload":{const e=(0,we.Ut)(a,t,"upload");e&&d.upload.push(e);break}case"google":{const e=(0,we.Ut)(n,t);e&&d.google.push(e);break}}})),!i){const{group:e,font:t}=s;switch(e){case"upload":d.upload.push(t);break;case"system":d.system.push(t);break;case"adobe":d.adobe.push(t);break;default:d.google.push(t)}}return{fonts:d,adobeKitId:u}})({projectDefaultFontId:n,parsedFonts:(0,he.xV)(),fonts:(0,c.Ai)(a),defaultFont:(0,c.JE)(a)}),{fonts:_,adobeKitId:b}=p,{freeScripts:m,freeStyles:h,proScripts:g,proStyles:y}=De({$root:u,fonts:_,css:i,config:s,extra:{adobeKitId:b}}),E=(e=>e.replace(/data-brz-dcatts=(["'])(.*?)\1/g,"$2"))(u("body").html()??"");return r.purge(),(0,he.yd)(),{html:E,assets:{freeScripts:m,freeStyles:h,proScripts:g,proStyles:y},symbols:d}},Ke=e=>{const{block:t,store:r,editorMode:s}=e,{Page:o}=K.Z.getComponents(),a=(0,G.Z)(),n=(0,j.useCallback)((()=>a),[a]);if(!o)throw Error("Missing Page Components",K.Z.getComponents());const c=r.getState(),l={items:[t]};return j.createElement(j.Fragment,null,j.createElement(o,{dbValue:l,reduxStore:r,reduxState:c,renderContext:"view",editorMode:s,getGlobalConfig:n}))},Ge=e=>{const{block:t,store:r,config:s,editorMode:o}=e,a=new Y,n=j.createElement(_e,{store:r,sheet:a.instance,config:s,editorMode:o},j.createElement(Ke,{block:t,store:r,editorMode:o}));return je({Page:n,sheet:a.instance,store:r,config:s})};var Ve=r(12920);const Ye=e=>{const{block:t,store:r,editorMode:s,className:o}=e,{PagePopup:a}=K.Z.getComponents(),n=(0,G.Z)(),c=(0,j.useCallback)((()=>n),[n]);if(!a)throw Error("Missing PagePopup Components",K.Z.getComponents());const l=r.getState(),i={items:[t]};return j.createElement(j.Fragment,null,j.createElement(a,{className:o,dbValue:i,reduxStore:r,reduxState:l,renderContext:"view",editorMode:s,getGlobalConfig:c}))},Ne=e=>{const{block:t,store:r,config:s,editorMode:o}=e,a=(0,E.Ht)(s),n=(0,E.yd)(s)?(0,Ve.J)(s):void 0,c=new Y,l=j.createElement(_e,{store:r,sheet:c.instance,config:s,editorMode:o},j.createElement(Ye,{block:t,className:n,store:r,editorMode:o})),i=je({store:r,Page:l,sheet:c.instance,config:s});if(a)return i;const d=(0,w.U)(s,r),u=(0,g.u9)(i,["assets","freeStyles","pageStyles"])??[],p=(0,g.su)(u,d);return(0,g.tP)(i,["assets","freeStyles","pageStyles"],p)},He=e=>{const{block:t,store:r,editorMode:s}=e,{PageStory:o}=K.Z.getComponents(),a=(0,G.Z)(),n=(0,j.useCallback)((()=>a),[a]);if(!o)throw Error("Missing PageStory Components",K.Z.getComponents());const c=r.getState(),l={items:[t]};return j.createElement(j.Fragment,null,j.createElement(o,{dbValue:l,reduxStore:r,reduxState:c,renderContext:"view",editorMode:s,getGlobalConfig:n}))},$e=e=>{const{block:t,store:r,config:s,editorMode:o}=e,a=new Y,n=j.createElement(_e,{store:r,sheet:a.instance,config:s,editorMode:o},j.createElement(He,{block:t,store:r,editorMode:o}));return je({store:r,Page:n,sheet:a.instance,config:s})};async function qe(e){const{config:t,page:r,project:n,editorMode:d}=e,{globalBlocks:u=[],symbols:p}=t,{fonts:_}=n.data,b=function({middleware:e=[]}={middleware:[]}){return(0,i.MT)(R,(0,i.qC)(l.reduxBatch,(0,i.md)(...e)))}(),m=u?.reduce(((e,t)=>(e[t.uid]=t,e)),{})??{},h=(0,s.Z)(_,{system:{data:F.QB}});b.dispatch(function({project:e,projectStatus:t,fonts:r,page:s,globalBlocks:o,authorized:n,syncAllowed:c,config:l,editorMode:i,symbols:d}){return{type:a,payload:{project:e,projectStatus:t,fonts:r,page:s,globalBlocks:o,authorized:n,syncAllowed:c,config:l,editorMode:i,symbols:d}}}({page:r,project:n,fonts:h,globalBlocks:m,config:t,projectStatus:{},editorMode:d,symbols:p}));const g=(0,c.G3)(b.getState(),t),y={store:b,config:t,editorMode:d},E={styles:(0,w.U)(t,b)};return(0,o.CO)(d)?{project:E,blocks:g.map((e=>({id:e.value._id,block:Ne({...y,block:e})})))}:(0,o.zK)(d)?{project:E,blocks:g.map((e=>({id:e.value._id,block:$e({...y,block:e})})))}:{project:E,blocks:g.map((e=>({id:e.value._id,block:Ge({...y,block:e})})))}}}}]);